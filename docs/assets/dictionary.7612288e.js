import{_ as B}from"./preload-helper.101896b7.js";import{D as w}from"./Dictionary.09b1cb6f.js";import{e as b}from"./mitt.7f99bbc0.js";import{d as I,a6 as E,r as L,O as A,o as U,P as R,S as l,a4 as x,e as r,f as O,z as o,m as n,p as u,l as d,g as j,u as Q,F as q,x as s,L as G}from"./vue.df334614.js";import"./http-client.28a8ff7a.js";import"./index.de963593.js";import"./index.390778f0.js";import"./index.4621962e.js";import"./storage.6b2e7cd0.js";const H=s(" 查询 "),J=s(" 新增 "),K=s("启用"),W=s("禁用"),X=s("编辑"),Y=s("删除"),Z={class:"my-flex my-flex-end",style:{"margin-top":"20px"}},ee=I({name:"bpm/dictType"}),ce=I({...ee,setup(te){const T=E(()=>B(()=>import("./dictionary-form.1425f201.js"),["assets/dictionary-form.1425f201.js","assets/Dictionary.09b1cb6f.js","assets/http-client.28a8ff7a.js","assets/index.de963593.js","assets/index.390778f0.js","assets/vue.df334614.js","assets/index.4621962e.js","assets/storage.6b2e7cd0.js","assets/mitt.7f99bbc0.js"])),{proxy:k}=G(),y=L(),e=A({loading:!1,dictionaryFormTitle:"",filterModel:{name:"",dictionaryTypeId:0},total:0,pageInput:{currentPage:1,pageSize:20},dictionaryListData:[],dictionaryTypeName:""});U(()=>{b.on("refreshDict",t=>{(t==null?void 0:t.id)>0&&(e.filterModel.dictionaryTypeId=t.id,e.dictionaryTypeName=t.name),p()})}),R(()=>{b.off("refreshDict")});const p=async()=>{var i,m;e.loading=!0,e.pageInput.filter=e.filterModel;const t=await new w().getPage(e.pageInput);e.dictionaryListData=((i=t==null?void 0:t.data)==null?void 0:i.list)??[],e.total=((m=t.data)==null?void 0:m.total)??0,e.loading=!1},C=()=>{e.dictionaryFormTitle=`新增【${e.dictionaryTypeName}】字典`,y.value.open({dictionaryTypeId:e.filterModel.dictionaryTypeId})},D=t=>{e.dictionaryFormTitle=`编辑【${e.dictionaryTypeName}】字典`,y.value.open(t)},z=t=>{k.$modal.confirmDelete(`确定要删除【${t.name}】?`).then(async()=>{await new w().delete({id:t.id},{loading:!0,showSuccessMessage:!0}),p()}).catch(()=>{})},P=t=>{e.pageInput.pageSize=t,p()},F=t=>{e.pageInput.currentPage=t,p()};return(t,i)=>{const m=l("el-input"),g=l("el-form-item"),_=l("el-button"),M=l("el-form"),h=l("el-card"),c=l("el-table-column"),v=l("el-tag"),S=l("el-table"),N=l("el-pagination"),f=x("auth"),V=x("loading");return r(),O(q,null,[o(h,{shadow:"never","body-style":{paddingBottom:"0"},style:{"margin-top":"8px"}},{default:n(()=>[o(M,{model:e.filterModel,inline:!0},{default:n(()=>[o(g,{prop:"name"},{default:n(()=>[o(m,{modelValue:e.filterModel.name,"onUpdate:modelValue":i[0]||(i[0]=a=>e.filterModel.name=a),placeholder:"名称或编码"},null,8,["modelValue"])]),_:1}),o(g,null,{default:n(()=>[o(_,{type:"primary",icon:"ele-Search",onClick:p},{default:n(()=>[H]),_:1}),u((r(),d(_,{type:"primary",icon:"ele-Plus",onClick:C},{default:n(()=>[J]),_:1})),[[f,"api:admin:dictionary:add"]])]),_:1})]),_:1},8,["model"])]),_:1}),o(h,{shadow:"never",style:{"margin-top":"8px"}},{default:n(()=>[u((r(),d(S,{data:e.dictionaryListData,"row-key":"id",style:{width:"100%"}},{default:n(()=>[o(c,{prop:"name",label:"名称","min-width":"120","show-overflow-tooltip":""}),o(c,{prop:"code",label:"编码",width:"80","show-overflow-tooltip":""}),o(c,{prop:"value",label:"值",width:"80","show-overflow-tooltip":""}),o(c,{label:"状态",width:"70",align:"center","show-overflow-tooltip":""},{default:n(({row:a})=>[a.enabled?(r(),d(v,{key:0,type:"success"},{default:n(()=>[K]),_:1})):(r(),d(v,{key:1,type:"danger"},{default:n(()=>[W]),_:1}))]),_:1}),o(c,{label:"操作",width:"140",fixed:"right","header-align":"center",align:"center"},{default:n(({row:a})=>[u((r(),d(_,{icon:"ele-EditPen",size:"small",text:"",type:"primary",onClick:$=>D(a)},{default:n(()=>[X]),_:2},1032,["onClick"])),[[f,"api:admin:dictionary:update"]]),u((r(),d(_,{icon:"ele-Delete",size:"small",text:"",type:"danger",onClick:$=>z(a)},{default:n(()=>[Y]),_:2},1032,["onClick"])),[[f,"api:admin:dictionary:delete"]])]),_:1})]),_:1},8,["data"])),[[V,e.loading]]),j("div",Z,[o(N,{currentPage:e.pageInput.currentPage,"onUpdate:currentPage":i[1]||(i[1]=a=>e.pageInput.currentPage=a),"page-size":e.pageInput.pageSize,"onUpdate:page-size":i[2]||(i[2]=a=>e.pageInput.pageSize=a),total:e.total,"page-sizes":[10,20,50,100],small:"",background:"",onSizeChange:P,onCurrentChange:F,layout:"total, sizes, prev, pager, next, jumper"},null,8,["currentPage","page-size","total"])])]),_:1}),o(Q(T),{ref_key:"dictionaryFormRef",ref:y,title:e.dictionaryFormTitle},null,8,["title"])],64)}}});export{ce as default};

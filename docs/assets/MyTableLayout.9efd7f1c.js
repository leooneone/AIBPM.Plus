import{_ as A}from"./preload-helper.101896b7.js";import{d as _,a6 as M,O as B,J as N,e as v,f as d,g as F,F as w,B as C,I as p,l as J,u as L}from"./vue.72f2672d.js";const W=["config"],j=_({name:"my-table-layout"}),D=_({...j,props:{activeId:String||Number,item:Object,conf:Object,index:String||Number},setup(h){const e=h,b=M(()=>A(()=>import("./TableCell.2abd9bc5.js"),["assets/TableCell.2abd9bc5.js","assets/preload-helper.101896b7.js","assets/vue.72f2672d.js","assets/TableCell.f5ccd934.css"])),m=B({activeCell:{row:0,col:0}}),S=(i,r)=>{m.activeCell={row:i,col:r}};p("onActiveCell",S),p("IsActiveCell",(i,r)=>e.conf.activeId===e.item.formId&&m.activeCell.row===i&&m.activeCell.col===r),p("onActiveCell",S),p("cellOperate",(i,r,c)=>{var o={colSpan:1,rowSpan:1,children:[],isMerged:!1};if(c==="insertLeftCol")for(var l=0;l<e.item.children.length;l++)e.item.children[l].cols.splice(r,0,o);else if(c==="insertRightCol")for(var l=0;l<e.item.children.length;l++){var a=e.item.children[l].cols[r];e.item.children[l].cols.splice(r+a.colSpan,0,o)}if(c==="insertAboveRow"){for(var f={cols:[]},l=0;l<e.item.children[0].cols.length;l++)f.cols.push(JSON.parse(JSON.stringify(o)));e.item.children.splice(i,0,f)}else if(c==="insertBelowRow"){for(var f={cols:[]},l=0;l<e.item.children[0].cols.length;l++)f.cols.push(JSON.parse(JSON.stringify(o)));var a=e.item.children[i].cols[r];e.item.children.splice(i+a.rowSpan,0,f)}if(c==="mergeRightCol"){if(r<e.item.children[i].cols.length-1){var n=e.item.children[i].cols[r],t=e.item.children[i].cols[r+n.colSpan];n.colSpan+=t.colSpan,n.children.push(...t.children),t.children=[],t.colSpan=1,t.isMerged=!0}}else if(c==="mergeWholeRow"){var s=e.item.children[i].cols.length,n=e.item.children[i].cols[0];if(n.colSpan=s,s>0)for(var l=1;l<s;l++){var t=e.item.children[i].cols[l];t.colSpan=1,n.children.push(...t.children),t.children=[],t.isMerged=!0}}else if(c==="mergeBelowRow"){if(i<e.item.children.length-1){var n=e.item.children[i].cols[r],t=e.item.children[i+n.rowSpan].cols[r];n.rowSpan+=t.rowSpan,t.rowSpan=1,n.children.push(...t.children),t.children=[],t.isMerged=!0}}else if(c==="splitMerged")for(var n=e.item.children[i].cols[r],O=n.rowSpan,k=n.colSpan,l=0;l<O;l++)for(var u=0;u<k;u++){var g=e.item.children[i+l].cols[r+u];g.isMerged=!1,g.colSpan=1,g.rowSpan=1}if(c==="mergeWholeCol"&&e.item.children.length>0){var n=e.item.children[0].cols[r],s=e.item.children.length;n.rowSpan=s;for(var l=1;l<s;l++){var t=e.item.children[l].cols[r];t.rowSpan=1,n.children.push(...t.children),t.children=[],t.isMerged=!0}}if(c==="deleteWholeRow"&&e.item.children.splice(i,1),c==="deleteWholeCol")for(var l=0;l<e.item.children.length;l++)e.item.children[l].cols.splice(r,1)});const y=i=>{e.conf.tableRefs||(e.conf.tableRefs={}),e.conf.tableRefs[e.item.vModel]=i},R=N("activeFormItem");return p("activeFormItem",R),(i,r)=>(v(),d("table",{class:"table-layout",ref:y,config:h.item},[F("tbody",null,[(v(!0),d(w,null,C(h.item.children,(c,o)=>(v(),d("tr",{key:o},[(v(!0),d(w,null,C(c.cols,(l,a)=>(v(),J(L(b),{key:a,item:l,"table-data":h.item,"col-index":a,"row-index":o,conf:h.conf},null,8,["item","table-data","col-index","row-index","conf"]))),128))]))),128))])],8,W))}});export{D as default};

import{_ as B}from"./preload-helper.101896b7.js";import{d as N,a6 as F,O as L,J as W,e as f,f as u,g as O,y as j,t as E,F as m,B as _,I as S,l as T,u as V}from"./vue.72f2672d.js";const D=["config","disabled"],M={key:0},P=N({name:"my-table-layout"}),K=N({...P,props:{activeId:String||Number,item:Object,conf:Object,index:String||Number},setup(c){const g=c,k=F(()=>B(()=>import("./TableCell.b95a2e25.js"),["assets/TableCell.b95a2e25.js","assets/preload-helper.101896b7.js","assets/vue.72f2672d.js","assets/TableCell.9ffdc0fc.css"])),w=L({activeCell:{row:0,col:0}}),y=(n,r)=>{w.activeCell={row:n,col:r}};S("onActiveCell",y),S("IsActiveCell",(n,r)=>g.conf.activeId===g.item.formId&&w.activeCell.row===n&&w.activeCell.col===r),S("onActiveCell",y),S("cellOperate",(n,r,i)=>{var s={colSpan:1,rowSpan:1,children:[],state:0},e=g.item.children;if(i==="insertLeftCol")for(var l=0;l<e.length;l++)e[l].children.splice(r,0,JSON.parse(JSON.stringify(s)));else if(i==="insertRightCol")for(var l=0;l<e.length;l++){var t=e[l].children[r];e[l].children.splice(r+t.colSpan,0,JSON.parse(JSON.stringify(s)))}else if(i==="insertAboveRow"){for(var p={children:[]},l=0;l<e[0].children.length;l++)p.children.push(JSON.parse(JSON.stringify(s)));e.splice(n,0,p)}else if(i==="insertBelowRow"){for(var p={children:[]},l=0;l<e[0].children.length;l++)p.children.push(JSON.parse(JSON.stringify(s)));var t=e[n].children[r];e.splice(n+t.rowSpan,0,p)}else if(i==="mergeRightCol"){if(r<e[n].children.length-1){var t=e[n].children[r],h=t.colSpan,a=e[n].children[r+h],d=a.colSpan;t.colSpan+=d,t.children.push(...a.children),a.children=[],a.colSpan=1,a.state|=5,t.state|=4;for(var o=1;o<t.rowSpan;o++)h===1&&(e[n+o].children[r].state|=4),d===1&&(e[n+o].children[r+h].state|=4)}console.log(g.item.children)}else if(i==="mergeWholeRow"){var v=e[n].children.length,t=e[n].children[0];if(t.colSpan=v,v>0){t.state|=4;for(var l=1;l<v;l++){var a=e[n].children[l];a.colSpan=1,t.children.push(...a.children),a.children=[],a.state|=5}}console.log(e)}else if(i==="mergeBelowRow"){if(n<e.length-1){var t=e[n].children[r],h=t.rowSpan,a=e[n+h].children[r],d=a.rowSpan;t.rowSpan+=d,a.rowSpan=1,t.children.push(...a.children),a.children=[],a.state|=3,t.state|=2;for(var o=1;o<t.colspan;o++)h===1&&(e[n].children[r+o].state|=2),d===1&&(e[n+h].children[r+o].state|=2)}}else if(i==="mergeWholeCol"){if(e.length>0){var t=e[0].children[r],v=e.length;t.state|=2,t.rowSpan=v;for(var l=1;l<v;l++){var a=e[l].children[r];a.rowSpan=1,t.children.push(...a.children),a.children=[],a.state|=3}}console.log(e)}else if(i==="splitMerged")for(var t=e[n].children[r],J=t.rowSpan,R=t.colSpan,l=0;l<J;l++)for(var C=0;C<R;C++){var b=e[n+l].children[r+C];b.state=0,b.colSpan=1,b.rowSpan=1}if(i==="deleteWholeRow"&&e.splice(n,1),i==="deleteWholeCol")for(var l=0;l<e.length;l++)e[l].children.splice(r,1)});const A=W("activeFormItem");return S("activeFormItem",A),(n,r)=>(f(),u("table",{class:"table-layout",config:c.item,disabled:c.item.disabled},[O("caption",null,[c.item.showLabel?(f(),u("span",M,j(c.item.label),1)):E("",!0)]),O("tbody",null,[(f(!0),u(m,null,_(c.item.children,(i,s)=>(f(),u("tr",{key:s},[(f(!0),u(m,null,_(i.children,(e,l)=>(f(),T(V(k),{key:l,item:e,"table-data":c.item,"col-index":l,"row-index":s,conf:c.conf},null,8,["item","table-data","col-index","row-index","conf"]))),128))]))),128))])],8,D))}});export{K as default};

import{_ as A}from"./ai-form-3baf0d65.js";import{D as w}from"./Dictionary-67fba020.js";import{e as b}from"./index-1c0db287.js";import{k as D,h as B,e as E,l as L,i as R,A as U,m as l,$ as k,o as r,c as j,p as o,y as a,G as p,M as _,D as d,a as G,u as O,F as Q,R as q}from"./@vue-8306d5ee.js";import"./element-plus-e21f9b5a.js";import"./lodash-es-f559e892.js";import"./@vueuse-245b213e.js";import"./@element-plus-8ef115d9.js";import"./@popperjs-c75af06c.js";import"./@ctrl-f8748455.js";import"./dayjs-97457aaf.js";import"./@intlify-869ec77a.js";import"./async-validator-dee29e8b.js";import"./memoize-one-297ddbcb.js";import"./escape-html-e77024c3.js";import"./normalize-wheel-es-ed76fb12.js";import"./@floating-ui-c2863df3.js";import"./pinia-e84f6aa2.js";import"./vue-demi-71ba0ef2.js";import"./vue-router-c9c3da21.js";import"./vue-i18n-86a71ef1.js";import"./vue-27cbb85a.js";import"./js-cookie-edb2da2a.js";import"./nprogress-b96aa312.js";import"./axios-21b846bc.js";import"./mitt-f7ef348c.js";import"./vue-grid-layout-9f938aef.js";const H={class:"my-flex my-flex-end",style:{"margin-top":"20px"}},J=D({name:"bpm/dictType"}),De=D({...J,setup(K){const I=q(()=>A(()=>import("./dictionary-form-702971cd.js"),["assets/js/dictionary-form-702971cd.js","assets/js/Dictionary-67fba020.js","assets/js/index-1c0db287.js","assets/js/@vue-8306d5ee.js","assets/js/pinia-e84f6aa2.js","assets/js/vue-demi-71ba0ef2.js","assets/js/ai-form-3baf0d65.js","assets/js/element-plus-e21f9b5a.js","assets/js/lodash-es-f559e892.js","assets/js/@vueuse-245b213e.js","assets/js/@element-plus-8ef115d9.js","assets/js/@popperjs-c75af06c.js","assets/js/@ctrl-f8748455.js","assets/js/dayjs-97457aaf.js","assets/js/@intlify-869ec77a.js","assets/js/async-validator-dee29e8b.js","assets/js/memoize-one-297ddbcb.js","assets/js/escape-html-e77024c3.js","assets/js/normalize-wheel-es-ed76fb12.js","assets/js/@floating-ui-c2863df3.js","assets/css/ai-form-078e22e0.css","assets/js/vue-router-c9c3da21.js","assets/js/vue-i18n-86a71ef1.js","assets/js/vue-27cbb85a.js","assets/js/js-cookie-edb2da2a.js","assets/js/nprogress-b96aa312.js","assets/css/nprogress-8b89e2e0.css","assets/js/axios-21b846bc.js","assets/js/mitt-f7ef348c.js","assets/js/vue-grid-layout-9f938aef.js","assets/css/index-6baff94b.css"])),{proxy:T}=B(),y=E(),e=L({loading:!1,dictionaryFormTitle:"",filterModel:{name:"",dictionaryTypeId:0},total:0,pageInput:{currentPage:1,pageSize:20},dictionaryListData:[],dictionaryTypeName:""});R(()=>{b.on("refreshDict",t=>{(t==null?void 0:t.id)>0&&(e.filterModel.dictionaryTypeId=t.id,e.dictionaryTypeName=t.name),c()})}),U(()=>{b.off("refreshDict")});const c=async()=>{var n,s;e.loading=!0,e.pageInput.filter=e.filterModel;const t=await new w().getPage(e.pageInput);e.dictionaryListData=((n=t==null?void 0:t.data)==null?void 0:n.list)??[],e.total=((s=t.data)==null?void 0:s.total)??0,e.loading=!1},x=()=>{e.dictionaryFormTitle=`新增【${e.dictionaryTypeName}】字典`,y.value.open({dictionaryTypeId:e.filterModel.dictionaryTypeId})},C=t=>{e.dictionaryFormTitle=`编辑【${e.dictionaryTypeName}】字典`,y.value.open(t)},z=t=>{T.$modal.confirmDelete(`确定要删除【${t.name}】?`).then(async()=>{await new w().delete({id:t.id},{loading:!0,showSuccessMessage:!0}),c()}).catch(()=>{})},P=t=>{e.pageInput.pageSize=t,c()},M=t=>{e.pageInput.currentPage=t,c()};return(t,n)=>{const s=l("el-input"),g=l("el-form-item"),u=l("el-button"),F=l("el-form"),h=l("el-card"),m=l("el-table-column"),v=l("el-tag"),S=l("el-table"),N=l("el-pagination"),f=k("auth"),V=k("loading");return r(),j(Q,null,[o(h,{shadow:"never","body-style":{paddingBottom:"0"},style:{"margin-top":"8px"}},{default:a(()=>[o(F,{model:e.filterModel,inline:!0},{default:a(()=>[o(g,{prop:"name"},{default:a(()=>[o(s,{modelValue:e.filterModel.name,"onUpdate:modelValue":n[0]||(n[0]=i=>e.filterModel.name=i),placeholder:"名称或编码"},null,8,["modelValue"])]),_:1}),o(g,null,{default:a(()=>[o(u,{type:"primary",icon:"ele-Search",onClick:c},{default:a(()=>[p(" 查询 ")]),_:1}),_((r(),d(u,{type:"primary",icon:"ele-Plus",onClick:x},{default:a(()=>[p(" 新增 ")]),_:1})),[[f,"api:admin:dictionary:add"]])]),_:1})]),_:1},8,["model"])]),_:1}),o(h,{shadow:"never",style:{"margin-top":"8px"}},{default:a(()=>[_((r(),d(S,{data:e.dictionaryListData,"row-key":"id",style:{width:"100%"}},{default:a(()=>[o(m,{prop:"name",label:"名称","min-width":"120","show-overflow-tooltip":""}),o(m,{prop:"code",label:"编码",width:"80","show-overflow-tooltip":""}),o(m,{prop:"value",label:"值",width:"80","show-overflow-tooltip":""}),o(m,{label:"状态",width:"70",align:"center","show-overflow-tooltip":""},{default:a(({row:i})=>[i.enabled?(r(),d(v,{key:0,type:"success"},{default:a(()=>[p("启用")]),_:1})):(r(),d(v,{key:1,type:"danger"},{default:a(()=>[p("禁用")]),_:1}))]),_:1}),o(m,{label:"操作",width:"140",fixed:"right","header-align":"center",align:"center"},{default:a(({row:i})=>[_((r(),d(u,{icon:"ele-EditPen",size:"small",text:"",type:"primary",onClick:$=>C(i)},{default:a(()=>[p("编辑")]),_:2},1032,["onClick"])),[[f,"api:admin:dictionary:update"]]),_((r(),d(u,{icon:"ele-Delete",size:"small",text:"",type:"danger",onClick:$=>z(i)},{default:a(()=>[p("删除")]),_:2},1032,["onClick"])),[[f,"api:admin:dictionary:delete"]])]),_:1})]),_:1},8,["data"])),[[V,e.loading]]),G("div",H,[o(N,{currentPage:e.pageInput.currentPage,"onUpdate:currentPage":n[1]||(n[1]=i=>e.pageInput.currentPage=i),"page-size":e.pageInput.pageSize,"onUpdate:pageSize":n[2]||(n[2]=i=>e.pageInput.pageSize=i),total:e.total,"page-sizes":[10,20,50,100],small:"",background:"",onSizeChange:P,onCurrentChange:M,layout:"total, sizes, prev, pager, next, jumper"},null,8,["currentPage","page-size","total"])])]),_:1}),o(O(I),{ref_key:"dictionaryFormRef",ref:y,title:e.dictionaryFormTitle},null,8,["title"])],64)}}});export{De as default};

import{_ as E}from"./ai-form-3baf0d65.js";import{k,h as A,e as L,l as R,i as K,E as U,m as l,$ as D,o as p,c as Q,p as o,y as i,Y as j,am as G,G as s,M as f,D as c,a as O,u as W,R as Y}from"./@vue-8306d5ee.js";import{e as y,Q as I}from"./index-1c0db287.js";import"./element-plus-e21f9b5a.js";import"./lodash-es-f559e892.js";import"./@vueuse-245b213e.js";import"./@element-plus-8ef115d9.js";import"./@popperjs-c75af06c.js";import"./@ctrl-f8748455.js";import"./dayjs-97457aaf.js";import"./@intlify-869ec77a.js";import"./async-validator-dee29e8b.js";import"./memoize-one-297ddbcb.js";import"./escape-html-e77024c3.js";import"./normalize-wheel-es-ed76fb12.js";import"./@floating-ui-c2863df3.js";import"./pinia-e84f6aa2.js";import"./vue-demi-71ba0ef2.js";import"./vue-router-c9c3da21.js";import"./vue-i18n-86a71ef1.js";import"./vue-27cbb85a.js";import"./js-cookie-edb2da2a.js";import"./nprogress-b96aa312.js";import"./axios-21b846bc.js";import"./mitt-f7ef348c.js";import"./vue-grid-layout-9f938aef.js";const q={class:"my-flex-column w100 h100"},H={class:"my-flex my-flex-end",style:{"margin-top":"20px"}},J=k({name:"admin/dictData"}),xe=k({...J,setup(X,{expose:T}){const x=Y(()=>E(()=>import("./dict-form-4b9e0484.js"),["assets/js/dict-form-4b9e0484.js","assets/js/index-1c0db287.js","assets/js/@vue-8306d5ee.js","assets/js/pinia-e84f6aa2.js","assets/js/vue-demi-71ba0ef2.js","assets/js/ai-form-3baf0d65.js","assets/js/element-plus-e21f9b5a.js","assets/js/lodash-es-f559e892.js","assets/js/@vueuse-245b213e.js","assets/js/@element-plus-8ef115d9.js","assets/js/@popperjs-c75af06c.js","assets/js/@ctrl-f8748455.js","assets/js/dayjs-97457aaf.js","assets/js/@intlify-869ec77a.js","assets/js/async-validator-dee29e8b.js","assets/js/memoize-one-297ddbcb.js","assets/js/escape-html-e77024c3.js","assets/js/normalize-wheel-es-ed76fb12.js","assets/js/@floating-ui-c2863df3.js","assets/css/ai-form-078e22e0.css","assets/js/vue-router-c9c3da21.js","assets/js/vue-i18n-86a71ef1.js","assets/js/vue-27cbb85a.js","assets/js/js-cookie-edb2da2a.js","assets/js/nprogress-b96aa312.js","assets/css/nprogress-8b89e2e0.css","assets/js/axios-21b846bc.js","assets/js/mitt-f7ef348c.js","assets/js/vue-grid-layout-9f938aef.js","assets/css/index-6baff94b.css"])),{proxy:h}=A(),_=L(),e=R({loading:!1,dictFormTitle:"",filterModel:{name:"",dictTypeId:0},total:0,pageInput:{currentPage:1,pageSize:20},dictListData:[],dictTypeName:""});K(async()=>{y.off("refreshDict"),y.on("refreshDict",()=>{r()})}),U(()=>{y.off("refreshDict")});const r=async()=>{var a,m;e.loading=!0,e.pageInput.filter=e.filterModel;const t=await new I().getPage(e.pageInput).catch(()=>{e.loading=!1});e.dictListData=((a=t==null?void 0:t.data)==null?void 0:a.list)??[],e.total=((m=t==null?void 0:t.data)==null?void 0:m.total)??0,e.loading=!1},C=()=>{if(!(e.filterModel.dictTypeId>0)){h.$modal.msgWarning("请选择字典类型");return}e.dictFormTitle=`新增【${e.dictTypeName}】字典`,_.value.open({dictTypeId:e.filterModel.dictTypeId})},M=t=>{e.dictFormTitle=`编辑【${e.dictTypeName}】字典`,_.value.open(t)},z=t=>{h.$modal.confirmDelete(`确定要删除【${t.name}】?`).then(async()=>{await new I().delete({id:t.id},{loading:!0,showSuccessMessage:!0}),r()}).catch(()=>{})},P=t=>{e.pageInput.pageSize=t,r()},S=t=>{e.pageInput.currentPage=t,r()};return T({refresh:t=>{(t==null?void 0:t.id)>0&&(e.filterModel.dictTypeId=t.id,e.dictTypeName=t.name,r())}}),(t,a)=>{const m=l("el-input"),w=l("el-form-item"),u=l("el-button"),$=l("el-form"),v=l("el-card"),d=l("el-table-column"),b=l("el-tag"),F=l("el-table"),N=l("el-pagination"),g=D("auth"),V=D("loading");return p(),Q("div",q,[o(v,{class:"mt8",shadow:"never","body-style":{paddingBottom:"0"}},{default:i(()=>[o($,{model:e.filterModel,inline:!0,onSubmit:a[1]||(a[1]=j(()=>{},["stop","prevent"]))},{default:i(()=>[o(w,{prop:"name"},{default:i(()=>[o(m,{modelValue:e.filterModel.name,"onUpdate:modelValue":a[0]||(a[0]=n=>e.filterModel.name=n),placeholder:"名称或编码",onKeyup:G(r,["enter"])},null,8,["modelValue","onKeyup"])]),_:1}),o(w,null,{default:i(()=>[o(u,{type:"primary",icon:"ele-Search",onClick:r},{default:i(()=>[s(" 查询 ")]),_:1}),f((p(),c(u,{type:"primary",icon:"ele-Plus",onClick:C},{default:i(()=>[s(" 新增 ")]),_:1})),[[g,"api:admin:dict:add"]])]),_:1})]),_:1},8,["model"])]),_:1}),o(v,{class:"my-fill mt8",shadow:"never"},{default:i(()=>[f((p(),c(F,{data:e.dictListData,"row-key":"id",style:{width:"100%"}},{default:i(()=>[o(d,{prop:"name",label:"名称","min-width":"120","show-overflow-tooltip":""}),o(d,{prop:"code",label:"编码","min-width":"120","show-overflow-tooltip":""}),o(d,{prop:"value",label:"值",width:"80","show-overflow-tooltip":""}),o(d,{prop:"sort",label:"排序",width:"60",align:"center","show-overflow-tooltip":""}),o(d,{label:"状态",width:"70",align:"center","show-overflow-tooltip":""},{default:i(({row:n})=>[n.enabled?(p(),c(b,{key:0,type:"success"},{default:i(()=>[s("启用")]),_:1})):(p(),c(b,{key:1,type:"danger"},{default:i(()=>[s("禁用")]),_:1}))]),_:1}),o(d,{label:"操作",width:"140",fixed:"right","header-align":"center",align:"center"},{default:i(({row:n})=>[f((p(),c(u,{icon:"ele-EditPen",size:"small",text:"",type:"primary",onClick:B=>M(n)},{default:i(()=>[s("编辑")]),_:2},1032,["onClick"])),[[g,"api:admin:dict:update"]]),f((p(),c(u,{icon:"ele-Delete",size:"small",text:"",type:"danger",onClick:B=>z(n)},{default:i(()=>[s("删除")]),_:2},1032,["onClick"])),[[g,"api:admin:dict:delete"]])]),_:1})]),_:1},8,["data"])),[[V,e.loading]]),O("div",H,[o(N,{currentPage:e.pageInput.currentPage,"onUpdate:currentPage":a[2]||(a[2]=n=>e.pageInput.currentPage=n),"page-size":e.pageInput.pageSize,"onUpdate:pageSize":a[3]||(a[3]=n=>e.pageInput.pageSize=n),total:e.total,"page-sizes":[10,20,50,100],small:"",background:"",onSizeChange:P,onCurrentChange:S,layout:"total, sizes, prev, pager, next, jumper"},null,8,["currentPage","page-size","total"])])]),_:1}),o(W(x),{ref_key:"dictFormRef",ref:_,title:e.dictFormTitle},null,8,["title"])])}}});export{xe as default};

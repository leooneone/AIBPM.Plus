import{_ as $}from"./ai-form-3baf0d65.js";import{D as C}from"./DictionaryType-fc13fd49.js";import{e as f}from"./index-1c0db287.js";import{k,h as U,e as D,l as N,i as j,A as G,n as O,m as r,$ as b,o as l,c as Q,p as a,y as o,G as s,M as _,D as d,a as q,u as H,F as J,R as K}from"./@vue-8306d5ee.js";import"./element-plus-e21f9b5a.js";import"./lodash-es-f559e892.js";import"./@vueuse-245b213e.js";import"./@element-plus-8ef115d9.js";import"./@popperjs-c75af06c.js";import"./@ctrl-f8748455.js";import"./dayjs-97457aaf.js";import"./@intlify-869ec77a.js";import"./async-validator-dee29e8b.js";import"./memoize-one-297ddbcb.js";import"./escape-html-e77024c3.js";import"./normalize-wheel-es-ed76fb12.js";import"./@floating-ui-c2863df3.js";import"./pinia-e84f6aa2.js";import"./vue-demi-71ba0ef2.js";import"./vue-router-c9c3da21.js";import"./vue-i18n-86a71ef1.js";import"./vue-27cbb85a.js";import"./js-cookie-edb2da2a.js";import"./nprogress-b96aa312.js";import"./axios-21b846bc.js";import"./mitt-f7ef348c.js";import"./vue-grid-layout-9f938aef.js";const W={class:"my-flex my-flex-end",style:{"margin-top":"20px"}},X=k({name:"bpm/dictType"}),xe=k({...X,setup(Y){const x=K(()=>$(()=>import("./dictionary-type-form-97416111.js"),["assets/js/dictionary-type-form-97416111.js","assets/js/DictionaryType-fc13fd49.js","assets/js/index-1c0db287.js","assets/js/@vue-8306d5ee.js","assets/js/pinia-e84f6aa2.js","assets/js/vue-demi-71ba0ef2.js","assets/js/ai-form-3baf0d65.js","assets/js/element-plus-e21f9b5a.js","assets/js/lodash-es-f559e892.js","assets/js/@vueuse-245b213e.js","assets/js/@element-plus-8ef115d9.js","assets/js/@popperjs-c75af06c.js","assets/js/@ctrl-f8748455.js","assets/js/dayjs-97457aaf.js","assets/js/@intlify-869ec77a.js","assets/js/async-validator-dee29e8b.js","assets/js/memoize-one-297ddbcb.js","assets/js/escape-html-e77024c3.js","assets/js/normalize-wheel-es-ed76fb12.js","assets/js/@floating-ui-c2863df3.js","assets/css/ai-form-078e22e0.css","assets/js/vue-router-c9c3da21.js","assets/js/vue-i18n-86a71ef1.js","assets/js/vue-27cbb85a.js","assets/js/js-cookie-edb2da2a.js","assets/js/nprogress-b96aa312.js","assets/css/nprogress-8b89e2e0.css","assets/js/axios-21b846bc.js","assets/js/mitt-f7ef348c.js","assets/js/vue-grid-layout-9f938aef.js","assets/css/index-6baff94b.css"])),{proxy:z}=U(),h=D(),y=D(),e=N({loading:!1,dictionaryTypeFormTitle:"",filterModel:{name:""},total:0,pageInput:{currentPage:1,pageSize:20},dictionaryTypeListData:[]});j(()=>{p(),f.on("refreshDictType",()=>{p()})}),G(()=>{f.off("refreshDictType")});const p=async()=>{var i,c;e.loading=!0,e.pageInput.filter=e.filterModel;const t=await new C().getPage(e.pageInput);e.dictionaryTypeListData=((i=t==null?void 0:t.data)==null?void 0:i.list)??[],e.total=((c=t.data)==null?void 0:c.total)??0,e.dictionaryTypeListData.length>0&&O(()=>{h.value.setCurrentRow(e.dictionaryTypeListData[0])}),e.loading=!1},P=()=>{e.dictionaryTypeFormTitle="新增字典分类",y.value.open()},I=t=>{e.dictionaryTypeFormTitle="编辑字典分类",y.value.open(t)},F=t=>{z.$modal.confirmDelete(`确定要删除【${t.name}】?`).then(async()=>{await new C().delete({id:t.id},{loading:!0,showSuccessMessage:!0}),p()}).catch(()=>{})},M=t=>{e.pageInput.pageSize=t,p()},S=t=>{e.pageInput.currentPage=t,p()},R=t=>{f.emit("refreshDict",t)};return(t,i)=>{const c=r("el-input"),T=r("el-form-item"),m=r("el-button"),V=r("el-form"),v=r("el-card"),u=r("el-table-column"),w=r("el-tag"),L=r("el-table"),A=r("el-pagination"),g=b("auth"),B=b("loading");return l(),Q(J,null,[a(v,{shadow:"never","body-style":{paddingBottom:"0"},style:{"margin-top":"8px"}},{default:o(()=>[a(V,{model:e.filterModel,inline:!0},{default:o(()=>[a(T,{prop:"name"},{default:o(()=>[a(c,{modelValue:e.filterModel.name,"onUpdate:modelValue":i[0]||(i[0]=n=>e.filterModel.name=n),placeholder:"名称或编码"},null,8,["modelValue"])]),_:1}),a(T,null,{default:o(()=>[a(m,{type:"primary",icon:"ele-Search",onClick:p},{default:o(()=>[s(" 查询 ")]),_:1}),_((l(),d(m,{type:"primary",icon:"ele-Plus",onClick:P},{default:o(()=>[s(" 新增 ")]),_:1})),[[g,"api:admin:dictionary:add"]])]),_:1})]),_:1},8,["model"])]),_:1}),a(v,{shadow:"never",style:{"margin-top":"8px"}},{default:o(()=>[_((l(),d(L,{ref_key:"tableRef",ref:h,data:e.dictionaryTypeListData,"row-key":"id","highlight-current-row":"",style:{width:"100%"},onCurrentChange:R},{default:o(()=>[a(u,{prop:"name",label:"名称","min-width":"120","show-overflow-tooltip":""}),a(u,{prop:"code",label:"编码",width:"80","show-overflow-tooltip":""}),a(u,{label:"状态",width:"80",align:"center","show-overflow-tooltip":""},{default:o(({row:n})=>[n.enabled?(l(),d(w,{key:0,type:"success"},{default:o(()=>[s("启用")]),_:1})):(l(),d(w,{key:1,type:"danger"},{default:o(()=>[s("禁用")]),_:1}))]),_:1}),a(u,{label:"操作",width:"140",fixed:"right","header-align":"center",align:"center"},{default:o(({row:n})=>[_((l(),d(m,{icon:"ele-EditPen",size:"small",text:"",type:"primary",onClick:E=>I(n)},{default:o(()=>[s("编辑")]),_:2},1032,["onClick"])),[[g,"api:admin:dictionary:update"]]),_((l(),d(m,{icon:"ele-Delete",size:"small",text:"",type:"danger",onClick:E=>F(n)},{default:o(()=>[s("删除")]),_:2},1032,["onClick"])),[[g,"api:admin:dictionary:delete"]])]),_:1})]),_:1},8,["data"])),[[B,e.loading]]),q("div",W,[a(A,{currentPage:e.pageInput.currentPage,"onUpdate:currentPage":i[1]||(i[1]=n=>e.pageInput.currentPage=n),"page-size":e.pageInput.pageSize,"onUpdate:pageSize":i[2]||(i[2]=n=>e.pageInput.pageSize=n),total:e.total,"page-sizes":[10,20,50,100],small:"",background:"",onSizeChange:M,onCurrentChange:S,layout:"total, sizes, prev, pager, next, jumper"},null,8,["currentPage","page-size","total"])])]),_:1}),a(H(x),{ref_key:"dictionaryTypeFormRef",ref:y,title:e.dictionaryTypeFormTitle},null,8,["title"])],64)}}});export{xe as default};

var C=Object.defineProperty;var D=(m,e,l)=>e in m?C(m,e,{enumerable:!0,configurable:!0,writable:!0,value:l}):m[e]=l;var u=(m,e,l)=>(D(m,typeof e!="symbol"?e+"":e,l),l);import{k as h,l as N,i as k,m as p,$ as T,o as y,c as U,p as t,y as i,Y as V,am as B,G as g,M as Y,D as j,v as c,a as w}from"./@vue-8306d5ee.js";import{J as K,K as b}from"./index-0ce5277f.js";import{d as H}from"./dayjs-97457aaf.js";import"./pinia-e84f6aa2.js";import"./vue-demi-71ba0ef2.js";import"./ai-form-3baf0d65.js";import"./element-plus-e21f9b5a.js";import"./lodash-es-f559e892.js";import"./@vueuse-245b213e.js";import"./@element-plus-8ef115d9.js";import"./@popperjs-c75af06c.js";import"./@ctrl-f8748455.js";import"./async-validator-dee29e8b.js";import"./memoize-one-297ddbcb.js";import"./escape-html-e77024c3.js";import"./@intlify-869ec77a.js";import"./normalize-wheel-es-ed76fb12.js";import"./@floating-ui-c2863df3.js";import"./vue-router-c9c3da21.js";import"./vue-i18n-86a71ef1.js";import"./vue-27cbb85a.js";import"./js-cookie-edb2da2a.js";import"./nprogress-b96aa312.js";import"./axios-21b846bc.js";import"./mitt-f7ef348c.js";import"./vue-grid-layout-9f938aef.js";class J extends K{constructor(){super(...arguments);u(this,"getPage",(l,r={})=>this.request({path:"/api/admin/login-log/get-page",method:"POST",body:l,secure:!0,type:b.Json,format:"json",...r}));u(this,"add",(l,r={})=>this.request({path:"/api/admin/login-log/add",method:"POST",body:l,secure:!0,type:b.Json,format:"json",...r}))}}const q={class:"my-layout"},O=w("br",null,null,-1),A={class:"my-flex my-flex-end",style:{"margin-top":"20px"}},E=h({name:"admin/loginLog"}),he=h({...E,setup(m){const e=N({loading:!1,loginLogFormTitle:"",filterModel:{createdUserName:""},total:0,pageInput:{currentPage:1,pageSize:20},loginLogListData:[],loginLogLogsTitle:""});k(()=>{r()});const l=(o,a,d)=>H(d).format("YYYY-MM-DD HH:mm:ss"),r=async()=>{var a,d;e.loading=!0,e.pageInput.filter=e.filterModel;const o=await new J().getPage(e.pageInput).catch(()=>{e.loading=!1});e.loginLogListData=((a=o==null?void 0:o.data)==null?void 0:a.list)??[],e.total=((d=o==null?void 0:o.data)==null?void 0:d.total)??0,e.loading=!1},v=o=>{e.pageInput.pageSize=o,r()},L=o=>{e.pageInput.currentPage=o,r()};return(o,a)=>{const d=p("el-input"),_=p("el-form-item"),P=p("el-button"),M=p("el-form"),f=p("el-card"),s=p("el-table-column"),S=p("el-tag"),z=p("el-table"),I=p("el-pagination"),x=T("loading");return y(),U("div",q,[t(f,{class:"mt8",shadow:"never","body-style":{paddingBottom:"0"}},{default:i(()=>[t(M,{model:e.filterModel,inline:!0,onSubmit:a[1]||(a[1]=V(()=>{},["stop","prevent"]))},{default:i(()=>[t(_,{prop:"name"},{default:i(()=>[t(d,{modelValue:e.filterModel.createdUserName,"onUpdate:modelValue":a[0]||(a[0]=n=>e.filterModel.createdUserName=n),placeholder:"登录账户",onKeyup:B(r,["enter"])},null,8,["modelValue","onKeyup"])]),_:1}),t(_,null,{default:i(()=>[t(P,{type:"primary",icon:"ele-Search",onClick:r},{default:i(()=>[g(" 查询 ")]),_:1})]),_:1})]),_:1},8,["model"])]),_:1}),t(f,{class:"my-fill mt8",shadow:"never"},{default:i(()=>[Y((y(),j(z,{data:e.loginLogListData,"row-key":"id",style:{width:"100%"}},{default:i(()=>[t(s,{prop:"createdUserName",label:"登录账号",width:"100"},{default:i(({row:n})=>[g(c(n.createdUserName),1),O,g(c(n.nickName),1)]),_:1}),t(s,{prop:"ip",label:"IP地址",width:"130"}),t(s,{prop:"browser",label:"浏览器",width:"100"}),t(s,{prop:"os",label:"操作系统",width:"100"}),t(s,{prop:"elapsedMilliseconds",label:"耗时(毫秒)",width:"100"}),t(s,{prop:"status",label:"登录状态",width:"80"},{default:i(({row:n})=>[t(S,{type:n.status?"success":"danger","disable-transitions":""},{default:i(()=>[g(c(n.status?"成功":"失败"),1)]),_:2},1032,["type"])]),_:1}),t(s,{prop:"createdTime",label:"登录时间",formatter:l,width:"160"}),t(s,{prop:"msg",label:"登录消息",width:""})]),_:1},8,["data"])),[[x,e.loading]]),w("div",A,[t(I,{currentPage:e.pageInput.currentPage,"onUpdate:currentPage":a[2]||(a[2]=n=>e.pageInput.currentPage=n),"page-size":e.pageInput.pageSize,"onUpdate:pageSize":a[3]||(a[3]=n=>e.pageInput.pageSize=n),total:e.total,"page-sizes":[10,20,50,100],small:"",background:"",onSizeChange:v,onCurrentChange:L,layout:"total, sizes, prev, pager, next, jumper"},null,8,["currentPage","page-size","total"])])]),_:1})])}}});export{he as default};

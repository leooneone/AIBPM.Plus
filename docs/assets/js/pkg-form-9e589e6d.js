import{P as u}from"./Pkg-f9086e37.js";import{e as C}from"./index-aa73a18b.js";import{j as L}from"./lodash-es-f559e892.js";import{k as g,e as U,l as S,ah as z,m as n,o as B,c as N,p as t,y as l,a as P,G as _,u as s}from"./@vue-8306d5ee.js";import"./pinia-e84f6aa2.js";import"./vue-demi-71ba0ef2.js";import"./ai-form-7f0c78d7.js";import"./element-plus-e21f9b5a.js";import"./@vueuse-245b213e.js";import"./@element-plus-8ef115d9.js";import"./@popperjs-c75af06c.js";import"./@ctrl-f8748455.js";import"./dayjs-97457aaf.js";import"./@intlify-869ec77a.js";import"./async-validator-dee29e8b.js";import"./memoize-one-297ddbcb.js";import"./escape-html-e77024c3.js";import"./normalize-wheel-es-ed76fb12.js";import"./@floating-ui-c2863df3.js";import"./vue-router-c9c3da21.js";import"./vue-i18n-86a71ef1.js";import"./vue-27cbb85a.js";import"./js-cookie-edb2da2a.js";import"./nprogress-b96aa312.js";import"./axios-21b846bc.js";import"./mitt-f7ef348c.js";import"./vue-grid-layout-9f938aef.js";const R={class:"dialog-footer"},M=g({name:"admin/pkg/form"}),ie=g({...M,props:{title:{type:String,default:""}},setup(V,{expose:w}){const f=U(),o=S({showDialog:!1,sureLoading:!1,form:{}}),{form:a}=z(o),x=async(d={id:0})=>{let e=L(d);if(d.id>0){const m=await new u().get({id:d.id},{loading:!0});m!=null&&m.success&&(e=m.data,e.parentId=e.parentId&&e.parentId>0?e.parentId:void 0)}o.form=e,o.showDialog=!0},b=()=>{o.showDialog=!1},k=()=>{f.value.validate(async d=>{if(!d)return;o.sureLoading=!0;let e={};o.form.parentId=o.form.parentId&&o.form.parentId>0?o.form.parentId:void 0,o.form.id!=null&&o.form.id>0?e=await new u().update(o.form,{showSuccessMessage:!0}).catch(()=>{o.sureLoading=!1}):e=await new u().add(o.form,{showSuccessMessage:!0}).catch(()=>{o.sureLoading=!1}),o.sureLoading=!1,e!=null&&e.success&&(C.emit("refreshPkg"),o.showDialog=!1)})};return w({open:x}),(d,e)=>{const m=n("el-input"),i=n("el-form-item"),p=n("el-col"),y=n("el-input-number"),h=n("el-switch"),v=n("el-row"),D=n("el-form"),c=n("el-button"),I=n("el-dialog");return B(),N("div",null,[t(I,{modelValue:o.showDialog,"onUpdate:modelValue":e[5]||(e[5]=r=>o.showDialog=r),"destroy-on-close":"",title:V.title,draggable:"","close-on-click-modal":!1,"close-on-press-escape":!1,width:"600px"},{footer:l(()=>[P("span",R,[t(c,{onClick:b,size:"default"},{default:l(()=>[_("取 消")]),_:1}),t(c,{type:"primary",onClick:k,size:"default",loading:o.sureLoading},{default:l(()=>[_("确 定")]),_:1},8,["loading"])])]),default:l(()=>[t(D,{model:s(a),ref_key:"formRef",ref:f,size:"default","label-width":"80px"},{default:l(()=>[t(v,{gutter:35},{default:l(()=>[t(p,{xs:24,sm:24,md:24,lg:24,xl:24},{default:l(()=>[t(i,{label:"名称",prop:"name",rules:[{required:!0,message:"请输入名称",trigger:["blur","change"]}]},{default:l(()=>[t(m,{modelValue:s(a).name,"onUpdate:modelValue":e[0]||(e[0]=r=>s(a).name=r),clearable:""},null,8,["modelValue"])]),_:1})]),_:1}),t(p,{xs:24,sm:24,md:24,lg:24,xl:24},{default:l(()=>[t(i,{label:"编码",prop:"code"},{default:l(()=>[t(m,{modelValue:s(a).code,"onUpdate:modelValue":e[1]||(e[1]=r=>s(a).code=r),clearable:""},null,8,["modelValue"])]),_:1})]),_:1}),t(p,{xs:24,sm:12,md:12,lg:12,xl:12},{default:l(()=>[t(i,{label:"排序"},{default:l(()=>[t(y,{modelValue:s(a).sort,"onUpdate:modelValue":e[2]||(e[2]=r=>s(a).sort=r)},null,8,["modelValue"])]),_:1})]),_:1}),t(p,{xs:24,sm:12,md:12,lg:12,xl:12},{default:l(()=>[t(i,{label:"启用"},{default:l(()=>[t(h,{modelValue:s(a).enabled,"onUpdate:modelValue":e[3]||(e[3]=r=>s(a).enabled=r)},null,8,["modelValue"])]),_:1})]),_:1}),t(p,{xs:24,sm:24,md:24,lg:24,xl:24},{default:l(()=>[t(i,{label:"说明"},{default:l(()=>[t(m,{modelValue:s(a).description,"onUpdate:modelValue":e[4]||(e[4]=r=>s(a).description=r),clearable:"",type:"textarea"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue","title"])])}}});export{ie as default};

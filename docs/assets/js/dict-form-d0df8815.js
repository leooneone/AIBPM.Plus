import{Q as f,e as S}from"./index-0ce5277f.js";import{k as x,h as z,e as I,l as R,ah as T,m as s,o as V,c as M,p as l,y as t,a as c,D as q,G as _,x as E,u as n}from"./@vue-8306d5ee.js";import"./pinia-e84f6aa2.js";import"./vue-demi-71ba0ef2.js";import"./ai-form-3baf0d65.js";import"./element-plus-e21f9b5a.js";import"./lodash-es-f559e892.js";import"./@vueuse-245b213e.js";import"./@element-plus-8ef115d9.js";import"./@popperjs-c75af06c.js";import"./@ctrl-f8748455.js";import"./dayjs-97457aaf.js";import"./@intlify-869ec77a.js";import"./async-validator-dee29e8b.js";import"./memoize-one-297ddbcb.js";import"./escape-html-e77024c3.js";import"./normalize-wheel-es-ed76fb12.js";import"./@floating-ui-c2863df3.js";import"./vue-router-c9c3da21.js";import"./vue-i18n-86a71ef1.js";import"./vue-27cbb85a.js";import"./js-cookie-edb2da2a.js";import"./nprogress-b96aa312.js";import"./axios-21b846bc.js";import"./mitt-f7ef348c.js";import"./vue-grid-layout-9f938aef.js";const F={class:"dialog-footer my-flex my-flex-y-center my-flex-between"},G=x({name:"admin/dict/form"}),ce=x({...G,props:{title:{type:String,default:""}},setup(b,{expose:w}){const{proxy:y}=z(),p=I(),o=R({showDialog:!1,sureLoading:!1,form:{},contiAdd:!1}),{form:d}=T(o),v=async(m={})=>{if(m.id>0){o.contiAdd=!1;const e=await new f().get({id:m.id},{loading:!0}).catch(()=>{y.$modal.closeLoading()});e!=null&&e.success&&(o.form=e.data)}else o.form={dictTypeId:m.dictTypeId,enabled:!0};o.showDialog=!0},k=()=>{o.showDialog=!1},D=()=>{p.value.validate(async m=>{if(!m)return;o.sureLoading=!0;let e={};o.form.id!=null&&o.form.id>0?e=await new f().update(o.form,{showSuccessMessage:!0}).catch(()=>{o.sureLoading=!1}):e=await new f().add(o.form,{showSuccessMessage:!0}).catch(()=>{o.sureLoading=!1}),o.sureLoading=!1,e!=null&&e.success&&(o.contiAdd&&p.value.resetFields(),S.emit("refreshDict"),o.showDialog=o.contiAdd)})};return w({open:v}),(m,e)=>{const u=s("el-input"),i=s("el-form-item"),r=s("el-col"),h=s("el-input-number"),C=s("el-switch"),U=s("el-row"),A=s("el-form"),L=s("el-checkbox"),g=s("el-button"),B=s("el-dialog");return V(),M("div",null,[l(B,{modelValue:o.showDialog,"onUpdate:modelValue":e[7]||(e[7]=a=>o.showDialog=a),"destroy-on-close":"",title:b.title,draggable:"","close-on-click-modal":!1,"close-on-press-escape":!1,width:"769px"},{footer:t(()=>{var a;return[c("span",F,[c("div",null,[((a=o.form)==null?void 0:a.id)>0?E("",!0):(V(),q(L,{key:0,modelValue:o.contiAdd,"onUpdate:modelValue":e[6]||(e[6]=N=>o.contiAdd=N)},{default:t(()=>[_("连续新增")]),_:1},8,["modelValue"]))]),c("div",null,[l(g,{onClick:k,size:"default"},{default:t(()=>[_("取 消")]),_:1}),l(g,{type:"primary",onClick:D,size:"default",loading:o.sureLoading},{default:t(()=>[_("确 定")]),_:1},8,["loading"])])])]}),default:t(()=>[l(A,{ref_key:"formRef",ref:p,model:n(d),size:"default","label-width":"80px"},{default:t(()=>[l(U,{gutter:35},{default:t(()=>[l(r,{xs:24,sm:24,md:24,lg:24,xl:24},{default:t(()=>[l(i,{label:"名称",prop:"name",rules:[{required:!0,message:"请输入名称",trigger:["blur","change"]}]},{default:t(()=>[l(u,{modelValue:n(d).name,"onUpdate:modelValue":e[0]||(e[0]=a=>n(d).name=a),autocomplete:"off"},null,8,["modelValue"])]),_:1})]),_:1}),l(r,{xs:24,sm:24,md:24,lg:24,xl:24},{default:t(()=>[l(i,{label:"编码",prop:"code"},{default:t(()=>[l(u,{modelValue:n(d).code,"onUpdate:modelValue":e[1]||(e[1]=a=>n(d).code=a),autocomplete:"off"},null,8,["modelValue"])]),_:1})]),_:1}),l(r,{xs:24,sm:24,md:24,lg:24,xl:24},{default:t(()=>[l(i,{label:"字典值",prop:"value"},{default:t(()=>[l(u,{modelValue:n(d).value,"onUpdate:modelValue":e[2]||(e[2]=a=>n(d).value=a),autocomplete:"off"},null,8,["modelValue"])]),_:1})]),_:1}),l(r,{xs:24,sm:12,md:12,lg:12,xl:12},{default:t(()=>[l(i,{label:"排序",prop:"sort"},{default:t(()=>[l(h,{modelValue:n(d).sort,"onUpdate:modelValue":e[3]||(e[3]=a=>n(d).sort=a)},null,8,["modelValue"])]),_:1})]),_:1}),l(r,{xs:24,sm:12,md:12,lg:12,xl:12},{default:t(()=>[l(i,{label:"启用",prop:"enabled"},{default:t(()=>[l(C,{modelValue:n(d).enabled,"onUpdate:modelValue":e[4]||(e[4]=a=>n(d).enabled=a)},null,8,["modelValue"])]),_:1})]),_:1}),l(r,{xs:24,sm:24,md:24,lg:24,xl:24},{default:t(()=>[l(i,{label:"说明",prop:"description"},{default:t(()=>[l(u,{modelValue:n(d).description,"onUpdate:modelValue":e[5]||(e[5]=a=>n(d).description=a),clearable:"",type:"textarea"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue","title"])])}}});export{ce as default};

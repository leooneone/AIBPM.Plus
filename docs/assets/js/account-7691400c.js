import{_ as U}from"./ai-form-3baf0d65.js";import{k as x,e as h,l as q,j as $,m as i,$ as A,o as y,c as B,p as s,y as t,am as I,a as v,I as E,M as K,D as O,v as j,u as M,R as z}from"./@vue-8306d5ee.js";import{u as J,d as L}from"./vue-router-c9c3da21.js";import{v as G}from"./vue-i18n-86a71ef1.js";import{R as k,a as D,T as H,S as Q,N as W,_ as X}from"./index-1c0db287.js";import{a as Y}from"./formatTime-29ac8c52.js";import{a as b}from"./element-plus-e21f9b5a.js";import"./@intlify-869ec77a.js";import"./vue-27cbb85a.js";import"./pinia-e84f6aa2.js";import"./vue-demi-71ba0ef2.js";import"./js-cookie-edb2da2a.js";import"./@element-plus-8ef115d9.js";import"./nprogress-b96aa312.js";import"./axios-21b846bc.js";import"./lodash-es-f559e892.js";import"./mitt-f7ef348c.js";import"./vue-grid-layout-9f938aef.js";import"./@vueuse-245b213e.js";import"./@popperjs-c75af06c.js";import"./@ctrl-f8748455.js";import"./dayjs-97457aaf.js";import"./async-validator-dee29e8b.js";import"./memoize-one-297ddbcb.js";import"./escape-html-e77024c3.js";import"./normalize-wheel-es-ed76fb12.js";import"./@floating-ui-c2863df3.js";const Z=x({name:"loginAccount"}),ee=x({...Z,setup(oe){const C=z(()=>U(()=>import("./dialog-d0696db7.js"),["assets/js/dialog-d0696db7.js","assets/js/ai-form-3baf0d65.js","assets/js/@vue-8306d5ee.js","assets/js/element-plus-e21f9b5a.js","assets/js/lodash-es-f559e892.js","assets/js/@vueuse-245b213e.js","assets/js/@element-plus-8ef115d9.js","assets/js/@popperjs-c75af06c.js","assets/js/@ctrl-f8748455.js","assets/js/dayjs-97457aaf.js","assets/js/@intlify-869ec77a.js","assets/js/async-validator-dee29e8b.js","assets/js/memoize-one-297ddbcb.js","assets/js/escape-html-e77024c3.js","assets/js/normalize-wheel-es-ed76fb12.js","assets/js/@floating-ui-c2863df3.js","assets/css/ai-form-078e22e0.css"])),{t:S}=G.useI18n(),u=J(),f=L(),_=h(),g=h(),e=q({showDialog:!1,isShowPassword:!1,ruleForm:{userName:"admin",password:"111111",captchaId:"",captchaData:""},loading:{signIn:!1},disabled:{signIn:!1}}),V=$(()=>Y(new Date)),N=a=>{e.showDialog=!1,e.ruleForm.captchaId=a.captchaId,e.ruleForm.captchaData=JSON.stringify(a.track),w()},w=async()=>{var r;e.loading.signIn=!0;const a=await new k().login(e.ruleForm).catch(()=>{e.loading.signIn=!1});if(!(a!=null&&a.success)){e.loading.signIn=!1;return}const o=(r=a.data)==null?void 0:r.token;D().setToken(o);const n=await H();P(n)},p=async()=>{_.value.validate(async a=>{var n;if(!a)return;e.disabled.signIn=!0;const o=await new k().isCaptcha().catch(()=>{}).finally(()=>{e.disabled.signIn=!1});o!=null&&o.success&&(o.data?(e.showDialog=!0,(n=g.value)==null||n.refresh()):w())})},P=a=>{var o,n,r,c;if(a)b.warning("抱歉，您没有分配权限，请联系管理员"),D().removeToken(),Q.clear();else{let m=V.value;(o=u.query)!=null&&o.redirect?f.push({path:(n=u.query)==null?void 0:n.redirect,query:Object.keys((r=u.query)==null?void 0:r.params).length>0?JSON.parse((c=u.query)==null?void 0:c.params):""}):f.push("/");const d=S("message.signInText");b.success(`${m}，${d}`),W.start()}e.loading.signIn=!1};return(a,o)=>{const n=i("ele-User"),r=i("el-icon"),c=i("el-input"),m=i("el-form-item"),d=i("ele-Unlock"),R=i("el-button"),F=i("el-form"),T=A("waves");return y(),B("div",null,[s(F,{ref_key:"formRef",ref:_,model:e.ruleForm,size:"large",class:"login-content-form"},{default:t(()=>[s(m,{class:"login-animation1",prop:"userName",rules:[{required:!0,message:"请输入用户名",trigger:["blur","change"]}]},{default:t(()=>[s(c,{text:"",placeholder:a.$t("message.account.accountPlaceholder1"),modelValue:e.ruleForm.userName,"onUpdate:modelValue":o[0]||(o[0]=l=>e.ruleForm.userName=l),clearable:"",autocomplete:"off",onKeyup:I(p,["enter"])},{prefix:t(()=>[s(r,{class:"el-input__icon"},{default:t(()=>[s(n)]),_:1})]),_:1},8,["placeholder","modelValue","onKeyup"])]),_:1}),s(m,{class:"login-animation2",prop:"password",rules:[{required:!0,message:"请输入密码",trigger:["blur","change"]}]},{default:t(()=>[s(c,{type:e.isShowPassword?"text":"password",placeholder:a.$t("message.account.accountPlaceholder2"),modelValue:e.ruleForm.password,"onUpdate:modelValue":o[2]||(o[2]=l=>e.ruleForm.password=l),autocomplete:"off",onKeyup:I(p,["enter"])},{prefix:t(()=>[s(r,{class:"el-input__icon"},{default:t(()=>[s(d)]),_:1})]),suffix:t(()=>[v("i",{class:E(["iconfont el-input__icon login-content-password",e.isShowPassword?"icon-yincangmima":"icon-xianshimima"]),onClick:o[1]||(o[1]=l=>e.isShowPassword=!e.isShowPassword)},null,2)]),_:1},8,["type","placeholder","modelValue","onKeyup"])]),_:1}),s(m,{class:"login-animation4"},{default:t(()=>[K((y(),O(R,{type:"primary",class:"login-content-submit",round:"",onClick:p,disabled:e.disabled.signIn,loading:e.loading.signIn},{default:t(()=>[v("span",null,j(a.$t("message.account.accountBtnText")),1)]),_:1},8,["disabled","loading"])),[[T]])]),_:1})]),_:1},8,["model"]),s(M(C),{ref_key:"myCaptchaDialogRef",ref:g,modelValue:e.showDialog,"onUpdate:modelValue":o[3]||(o[3]=l=>e.showDialog=l),onOk:N},null,8,["modelValue"])])}}});const Ne=X(ee,[["__scopeId","data-v-9aacceed"]]);export{Ne as default};

import{k as _,e as c,m as f,o as r,c as n,D as p,y as d,G as l,x as y}from"./@vue-8306d5ee.js";import{_ as k}from"./index-1c0db287.js";import"./pinia-e84f6aa2.js";import"./vue-demi-71ba0ef2.js";import"./ai-form-3baf0d65.js";import"./element-plus-e21f9b5a.js";import"./lodash-es-f559e892.js";import"./@vueuse-245b213e.js";import"./@element-plus-8ef115d9.js";import"./@popperjs-c75af06c.js";import"./@ctrl-f8748455.js";import"./dayjs-97457aaf.js";import"./@intlify-869ec77a.js";import"./async-validator-dee29e8b.js";import"./memoize-one-297ddbcb.js";import"./escape-html-e77024c3.js";import"./normalize-wheel-es-ed76fb12.js";import"./@floating-ui-c2863df3.js";import"./vue-router-c9c3da21.js";import"./vue-i18n-86a71ef1.js";import"./vue-27cbb85a.js";import"./js-cookie-edb2da2a.js";import"./nprogress-b96aa312.js";import"./axios-21b846bc.js";import"./mitt-f7ef348c.js";import"./vue-grid-layout-9f938aef.js";const v=_({name:"Recorder",setup(){const e=c(!1),a=c("");let t=null;const i=async()=>{try{const o=await navigator.mediaDevices.getUserMedia({audio:!0});t=new MediaRecorder(o),t.addEventListener("dataavailable",s),t.start(10),e.value=!0}catch(o){console.error(o),alert("无法获取麦克风权限，请检查设置")}},s=o=>{if(o.data&&o.data.size>0){const u=new Blob([o.data],{type:"audio/mp3"});a.value=URL.createObjectURL(u)}};return{recording:e,audioUrl:a,startRecord:i,stopRecord:()=>{t&&(t.stop(),e.value=!1)}}}});const C={class:"recorder"},R=["src"];function b(e,a,t,i,s,m){const o=f("el-button");return r(),n("div",C,[e.recording?(r(),p(o,{key:1,type:"danger",icon:"el-icon-close",onClick:e.stopRecord},{default:d(()=>[l(" 停止录音 ")]),_:1},8,["onClick"])):(r(),p(o,{key:0,type:"primary",icon:"el-icon-microphone",onClick:e.startRecord},{default:d(()=>[l(" 开始录音 ")]),_:1},8,["onClick"])),e.audioUrl?(r(),n("audio",{key:2,src:e.audioUrl,controls:""},null,8,R)):y("",!0)])}const Q=k(v,[["render",b],["__scopeId","data-v-92d708d8"]]);export{Q as default};

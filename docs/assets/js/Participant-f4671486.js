import{k as j,l as B,j as L,B as D,i as J,m as v,o as a,D as d,y as r,a as p,p as s,c as u,H as g,G as i,v as V,F as f,x as F,S as R,T as M}from"./@vue-8306d5ee.js";import{_ as $}from"./index-0ce5277f.js";import"./pinia-e84f6aa2.js";import"./vue-demi-71ba0ef2.js";import"./ai-form-3baf0d65.js";import"./element-plus-e21f9b5a.js";import"./lodash-es-f559e892.js";import"./@vueuse-245b213e.js";import"./@element-plus-8ef115d9.js";import"./@popperjs-c75af06c.js";import"./@ctrl-f8748455.js";import"./dayjs-97457aaf.js";import"./@intlify-869ec77a.js";import"./async-validator-dee29e8b.js";import"./memoize-one-297ddbcb.js";import"./escape-html-e77024c3.js";import"./normalize-wheel-es-ed76fb12.js";import"./@floating-ui-c2863df3.js";import"./vue-router-c9c3da21.js";import"./vue-i18n-86a71ef1.js";import"./vue-27cbb85a.js";import"./js-cookie-edb2da2a.js";import"./nprogress-b96aa312.js";import"./axios-21b846bc.js";import"./mitt-f7ef348c.js";import"./vue-grid-layout-9f938aef.js";const m=y=>(R("data-v-9c5804bf"),y=y(),M(),y),E={class:"my-row"},G={class:"my-row-title"},H={class:"my-row-detail"},q={key:0,class:"option-box",style:{color:"#a5a5a5"}},K={key:1,class:"option-box"},Q=m(()=>p("p",null,"使用表单中的联系人作为审批人",-1)),W={key:2,class:"option-box"},X=m(()=>p("p",null,"选择范围",-1)),Y={key:3},Z={style:{"font-size":"14px","padding-left":"1rem"}},ee=m(()=>p("br",null,null,-1)),le={key:4},oe={style:{"font-size":"14px","padding-left":"1rem"}},ae=m(()=>p("div",{style:{"border-bottom":"1px solid #e5e5e5","padding-bottom":"1rem"}},null,-1)),te={key:0,class:"option-box",style:{"border-bottom":"1px solid #e5e5e5"}},re=m(()=>p("p",null,"多人审批时采用的审批方式",-1)),se=m(()=>p("br",null,null,-1)),pe=m(()=>p("br",null,null,-1)),ie=m(()=>p("div",{class:"section-title mb15"},"审批人为空时",-1)),ne=j({__name:"Participant",props:{fields:{type:Array,default(){return[]}},data:{type:Object,default:()=>{}}},setup(y,{expose:N}){const U=y,O={participants:{user:[],role:[],org:[]},ouType:"0",level:0,isDirectorIn:!1,assigneeType:"user",formOperates:[],SignType:"string",optionalMultiUser:!1,optionalRange:"ALL"},l=B({approverForm:JSON.parse(JSON.stringify(O)),orgCollection:{org:[],role:[],user:[]},type:"approver",ouTypeList:[],fcOrgTabList:["org","role","user"],visible:!1,globalFormOperate:null,rangeOptions:[{label:"所有人",value:"all"},{label:"指定范围",value:"range"}],assigneeTypeOptions:[{label:"指定成员",value:"user"},{label:"发起人自己",value:"myself"},{label:"表单内的联系人",value:"form"},{label:"组织负责人",value:"director"},{label:"上级主管",value:"supervisor"},{label:"指定角色",value:"role"},{label:"发起人自选",value:"optional"}]}),I=L(()=>U.fields.filter(t=>t.tag==="ai-ou-select")),n=L(()=>{let t=Object.assign({},O);return Object.assign(t,U.data),(t===void 0||t.assigneeType===void 0||t.participants===void 0)&&(t=JSON.parse(JSON.stringify(O))),l.approverForm=t,t}),h=D("getOUType");J(()=>{var t={ou_type:h||[]};l.ouTypeList=t.ou_type});const C=()=>{for(let t in l.approverForm.participants)l.approverForm.participants[t]=[]},z=()=>l.approverForm,T=()=>{const t=l.assigneeTypeOptions.find(o=>o.value===l.approverForm.assigneeType);return t?t.label:""};return N({onConfirm:z}),(t,o)=>{const c=v("el-radio"),k=v("el-radio-group"),_=v("el-option"),b=v("el-select"),S=v("AiOuSelect"),A=v("el-switch"),P=v("el-main");return a(),d(P,null,{default:r(()=>{var w;return[p("div",E,[p("div",null,[p("div",G,[s(k,{modelValue:l.approverForm.assigneeType,"onUpdate:modelValue":o[0]||(o[0]=e=>l.approverForm.assigneeType=e),style:{"line-height":"32px"},onChange:C},{default:r(()=>[(a(!0),u(f,null,g(l.assigneeTypeOptions,e=>(a(),d(c,{label:e.value,key:e.value,class:"radio-item"},{default:r(()=>[i(V(e.label),1)]),_:2},1032,["label"]))),128))]),_:1},8,["modelValue"])]),p("div",H,[n.value.assigneeType==="myself"?(a(),u("div",q,"发起人自己将作为审批人处理审批单")):n.value.assigneeType==="form"?(a(),u("div",K,[Q,s(b,{modelValue:l.approverForm.fieldId,"onUpdate:modelValue":o[1]||(o[1]=e=>l.approverForm.fieldId=e),size:"small"},{default:r(()=>[(a(!0),u(f,null,g(I.value,(e,x)=>(a(),d(_,{key:x,label:e.label,value:e.vModel,disabled:e.disabled},null,8,["label","value","disabled"]))),128))]),_:1},8,["modelValue"])])):n.value.assigneeType==="optional"?(a(),u("div",W,[X,s(b,{modelValue:l.approverForm.optionalRange,"onUpdate:modelValue":o[2]||(o[2]=e=>l.approverForm.optionalRange=e),size:"small"},{default:r(()=>[(a(!0),u(f,null,g(l.rangeOptions,(e,x)=>(a(),d(_,{key:x,label:e.label,value:e.value,disabled:e.disabled},null,8,["label","value","disabled"]))),128))]),_:1},8,["modelValue"]),["range"].includes(n.value.optionalRange)?(a(),d(S,{key:0,title:T(),ref:"approver-org",modelValue:l.approverForm.participants,"onUpdate:modelValue":o[3]||(o[3]=e=>l.approverForm.participants=e),tabs:["user","role","org"],multiple:""},{default:r(()=>[i(V(T()),1)]),_:1},8,["title","modelValue"])):F("",!0)])):n.value.assigneeType==="supervisor"?(a(),u("div",Y,[p("div",Z,[s(b,{modelValue:l.approverForm.ouType,"onUpdate:modelValue":o[4]||(o[4]=e=>l.approverForm.ouType=e),size:"small"},{default:r(()=>[(a(!0),u(f,null,g(l.ouTypeList,e=>(a(),d(_,{key:e.value,label:`${e.label}`,value:e.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"]),i(" 内，发起人 "),s(b,{modelValue:l.approverForm.level,"onUpdate:modelValue":o[5]||(o[5]=e=>l.approverForm.level=e),size:"small"},{default:r(()=>[(a(),d(_,{key:0,label:"主管逐级",value:0})),(a(),d(_,{key:0,label:"直接主管",value:1}))]),_:1},8,["modelValue"]),i(" 审批 "),ee,i(" 包含所在"+V((w=l.ouTypeList.find(e=>e.value===l.approverForm.ouType))==null?void 0:w.label)+"负责人 ",1),s(A,{modelValue:l.approverForm.isDirectorIn,"onUpdate:modelValue":o[6]||(o[6]=e=>l.approverForm.isDirectorIn=e),style:{"margin-top":"1rem"}},null,8,["modelValue"])])])):n.value.assigneeType==="director"?(a(),u("div",le,[p("div",oe,[i(" 发起人所属 "),s(b,{modelValue:l.approverForm.ouType,"onUpdate:modelValue":o[7]||(o[7]=e=>l.approverForm.ouType=e),size:"small"},{default:r(()=>[(a(!0),u(f,null,g(l.ouTypeList,e=>(a(),d(_,{key:e.value,label:`${e.label}`,value:e.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"]),i("负责人 ")])])):F("",!0),["user","role"].includes(n.value.assigneeType)?(a(),d(S,{key:5,title:T(),ref:"approver-org",modelValue:l.approverForm.participants,"onUpdate:modelValue":o[8]||(o[8]=e=>l.approverForm.participants=e),tabs:l.fcOrgTabList.includes(n.value.assigneeType)?[n.value.assigneeType]:["org"],multiple:""},{default:r(()=>[i(V(T()),1)]),_:1},8,["title","modelValue","tabs"])):F("",!0)]),ae,n.value.participants[n.value.assigneeType]?(a(),u("div",te,[re,s(k,{modelValue:l.approverForm.SignType,"onUpdate:modelValue":o[9]||(o[9]=e=>l.approverForm.SignType=e),class:"ml-4"},{default:r(()=>[s(c,{label:"string",class:"radio-item radio-item-row"},{default:r(()=>[i("串签（逐个审批，须所有审批人同意）")]),_:1}),se,s(c,{label:"counterAnd",class:"radio-item radio-item-row"},{default:r(()=>[i("会签（须所有审批人同意）")]),_:1}),pe,s(c,{label:"counterOr",class:"radio-item radio-item-row"},{default:r(()=>[i("或签（一名审批人同意或拒绝即可）")]),_:1})]),_:1},8,["modelValue"])])):F("",!0),ie,s(k,{modelValue:l.approverForm.whenNullParticipant,"onUpdate:modelValue":o[10]||(o[10]=e=>l.approverForm.whenNullParticipant=e),class:"ml-4"},{default:r(()=>[s(c,{label:"0",class:"radio-item",value:0},{default:r(()=>[i("自动通过")]),_:1}),s(c,{label:"1",class:"radio-item",value:1},{default:r(()=>[i("由异常管理员处理")]),_:1})]),_:1},8,["modelValue"])])])]}),_:1})}}});const Pe=$(ne,[["__scopeId","data-v-9c5804bf"]]);export{Pe as default};

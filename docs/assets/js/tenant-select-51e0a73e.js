import{k as v,e as N,l as U,m as n,$ as K,o as g,D as f,y as l,a as _,p as a,G as h,Y as M,am as A,M as E,u as G,x as Q}from"./@vue-8306d5ee.js";import{T as Y}from"./Tenant-10f89243.js";import{h as $}from"./element-plus-e21f9b5a.js";import{_ as j}from"./index-c27e5712.js";import"./lodash-es-f559e892.js";import"./@vueuse-245b213e.js";import"./@element-plus-8ef115d9.js";import"./@popperjs-c75af06c.js";import"./@ctrl-f8748455.js";import"./dayjs-97457aaf.js";import"./@intlify-869ec77a.js";import"./async-validator-dee29e8b.js";import"./memoize-one-297ddbcb.js";import"./escape-html-e77024c3.js";import"./normalize-wheel-es-ed76fb12.js";import"./@floating-ui-c2863df3.js";import"./pinia-e84f6aa2.js";import"./vue-demi-71ba0ef2.js";import"./ai-form-97a12f88.js";import"./vue-router-c9c3da21.js";import"./vue-i18n-86a71ef1.js";import"./vue-27cbb85a.js";import"./js-cookie-edb2da2a.js";import"./nprogress-b96aa312.js";import"./axios-21b846bc.js";import"./mitt-f7ef348c.js";import"./vue-grid-layout-9f938aef.js";const q={style:{padding:"0px 0px 8px 8px","background-color":"var(--ba-bg-color)"}},F={class:"my-flex my-flex-end",style:{"margin-top":"20px"}},H={class:"dialog-footer"},J=v({name:"admin/tenant/components/tenant-select"}),O=v({...J,props:{title:{type:String,default:""},multiple:{type:Boolean,default:!1},sureLoading:{type:Boolean,default:!1}},emits:["sure"],setup(r,{expose:x,emit:k}){const d=r,m=N(),e=U({showDialog:!1,loading:!1,filter:{name:""},total:0,pageInput:{currentPage:1,pageSize:20,filter:{name:""}},tenantListData:[]}),C=()=>{e.showDialog=!0,s()},D=()=>{e.showDialog=!1},s=async()=>{var o,p;e.loading=!0,e.pageInput.filter=e.filter;const t=await new Y().getPage(e.pageInput).catch(()=>{e.loading=!1});e.tenantListData=((o=t==null?void 0:t.data)==null?void 0:o.list)??[],e.total=((p=t==null?void 0:t.data)==null?void 0:p.total)??0,e.loading=!1},S=t=>{e.pageInput.pageSize=t,s()},z=t=>{e.pageInput.currentPage=t,s()},I=t=>{m.value.toggleRowSelection(t,d.multiple?void 0:!0)},V=()=>{d.multiple||w()},P=()=>{e.showDialog=!1},w=()=>{const t=m.value.getSelectionRows();k("sure",d.multiple?t:t.length>0?t[0]:null)};return x({open:C,close:D}),(t,o)=>{const p=n("el-input"),y=n("el-form-item"),c=n("el-button"),R=n("el-form"),b=n("el-card"),u=n("el-table-column"),B=n("el-pagination"),T=n("el-dialog"),L=K("loading");return g(),f(T,{modelValue:e.showDialog,"onUpdate:modelValue":o[4]||(o[4]=i=>e.showDialog=i),"destroy-on-close":"",title:r.title,"append-to-body":"",draggable:"","close-on-click-modal":!1,"close-on-press-escape":!1,width:"780px"},{footer:l(()=>[_("span",H,[a(c,{onClick:P,size:"default"},{default:l(()=>[h("取 消")]),_:1}),a(c,{type:"primary",onClick:w,size:"default",loading:r.sureLoading},{default:l(()=>[h("确 定")]),_:1},8,["loading"])])]),default:l(()=>[_("div",q,[a(b,{shadow:"never","body-style":{paddingBottom:"0"},style:{"margin-top":"8px"}},{default:l(()=>[a(R,{model:e.filter,inline:!0,onSubmit:o[1]||(o[1]=M(()=>{},["stop","prevent"]))},{default:l(()=>[a(y,{label:"企业名",prop:"name"},{default:l(()=>[a(p,{modelValue:e.filter.name,"onUpdate:modelValue":o[0]||(o[0]=i=>e.filter.name=i),placeholder:"企业名",onKeyup:A(s,["enter"])},null,8,["modelValue","onKeyup"])]),_:1}),a(y,null,{default:l(()=>[a(c,{type:"primary",icon:"ele-Search",onClick:s},{default:l(()=>[h(" 查询 ")]),_:1})]),_:1})]),_:1},8,["model"])]),_:1}),a(b,{shadow:"never",style:{"margin-top":"8px"}},{default:l(()=>[E((g(),f(G($),{ref_key:"tenantTableRef",ref:m,data:e.tenantListData,style:{width:"100%"},"row-key":"id","default-expand-all":"","tree-props":{children:"children",hasChildren:"hasChildren"},"highlight-current-row":!r.multiple,onRowClick:I,onRowDblclick:V},{default:l(()=>[r.multiple?(g(),f(u,{key:0,type:"selection",width:"55"})):Q("",!0),a(u,{prop:"name",label:"企业名","min-width":"80","show-overflow-tooltip":""}),a(u,{prop:"code",label:"企业编码","min-width":"120","show-overflow-tooltip":""})]),_:1},8,["data","highlight-current-row"])),[[L,e.loading]]),_("div",F,[a(B,{currentPage:e.pageInput.currentPage,"onUpdate:currentPage":o[2]||(o[2]=i=>e.pageInput.currentPage=i),"page-size":e.pageInput.pageSize,"onUpdate:pageSize":o[3]||(o[3]=i=>e.pageInput.pageSize=i),total:e.total,"page-sizes":[10,20,50,100],small:"",background:"",onSizeChange:S,onCurrentChange:z,layout:"total, sizes, prev, pager, next"},null,8,["currentPage","page-size","total"])])]),_:1})])]),_:1},8,["modelValue","title"])}}});const Ce=j(O,[["__scopeId","data-v-4c9b7f05"]]);export{Ce as default};

import{k as F,e as S,B,l as R,m as l,o as n,D as s,y as a,a as m,p as r,G as i,x as N,c as O,H as U,v as j,F as w}from"./@vue-8306d5ee.js";const A={style:{float:"left"}},$={style:{float:"right",color:"var(--el-text-color-secondary)","font-size":"13px"}},q={class:"dialog-footer"},G=F({__name:"optionalPanel",props:{optional:{type:Object,default:c=>{}}},setup(c,{expose:_}){const p=c,d=S(),g=B("submitForm"),e=R({formData:{optionalParticipants:{}},rules:{optionalParticipants:[{required:!0,message:"请选择审批人",trigger:"change"}]},visible:!1}),b=u=>{d.value.validate(t=>{t&&(g(e.formData),e.visible=!1)})};return _({open:u=>{e.formData=Object.assign({optionalParticipants:{}},u),e.visible=!0}}),(u,t)=>{const v=l("ou-select"),V=l("AiOuSelect"),y=l("el-tag"),k=l("el-option"),D=l("el-select"),P=l("el-form-item"),x=l("el-form"),f=l("el-button"),C=l("el-dialog");return n(),s(C,{modelValue:e.visible,"onUpdate:modelValue":t[5]||(t[5]=o=>e.visible=o),title:"发起人自选",width:"50%"},{footer:a(()=>[m("span",q,[r(f,{onClick:t[3]||(t[3]=o=>e.visible=!1)},{default:a(()=>[i("取消")]),_:1}),r(f,{type:"primary",onClick:t[4]||(t[4]=o=>b(!0))},{default:a(()=>[i(" 确认 ")]),_:1})])]),default:a(()=>[r(x,{"label-position":"top",ref_key:"elFormRef",ref:d,model:e.formData,rules:e.rules},{default:a(()=>[r(P,{label:"["+p.optional.name+"]参与人设置",prop:"optionalParticipants"},{default:a(()=>[p.optional.range.length===0?(n(),s(v,{key:0,ref:"ouSelectRef",modelValue:e.formData.optionalParticipants,"onUpdate:modelValue":t[0]||(t[0]=o=>e.formData.optionalParticipants=o),tabs:["user","role","org"],multiple:""},{default:a(()=>[i(" 请选择")]),_:1},8,["modelValue"])):N("",!0),p.optional.range.length===0?(n(),s(V,{key:1,ref:"ouSelectRef",modelValue:e.formData.optionalParticipants,"onUpdate:modelValue":t[1]||(t[1]=o=>e.formData.optionalParticipants=o),tabs:["user","role","org"],multiple:""},{default:a(()=>[i(" 默认所有人")]),_:1},8,["modelValue"])):(n(),s(D,{key:2,modelValue:e.formData.optionalParticipants.user,"onUpdate:modelValue":t[2]||(t[2]=o=>e.formData.optionalParticipants.user=o),placeholder:"Select","value-key":"id",multiple:""},{default:a(()=>[(n(!0),O(w,null,U(p.optional.range,o=>(n(),s(k,{key:o.id,label:o.name,value:o},{default:a(()=>[m("span",A,j(o.name),1),m("span",$,[r(y,{plain:"",type:"success"},{default:a(()=>[i("用户")]),_:1})])]),_:2},1032,["label","value"]))),128))]),_:1},8,["modelValue"]))]),_:1},8,["label"])]),_:1},8,["model","rules"])]),_:1},8,["modelValue"])}}});export{G as default};

import{p as Z}from"./print-js-02dcfbfa.js";import{t as ee}from"./js-table2excel-af15f470.js";import{S as te}from"./sortablejs-0d19b1d3.js";import{s as oe}from"./pinia-e84f6aa2.js";import{u as ae,_ as le}from"./index-c27e5712.js";import{a as ne}from"./element-plus-e21f9b5a.js";import{k as $,e as re,l as ie,j as x,m as s,$ as se,o as c,c as b,M as ce,D as u,y as p,p as l,x as S,F as v,H as T,P as pe,G as V,v as de,q as me,a as _,n as he,S as ge,T as ue}from"./@vue-8306d5ee.js";import"./@intlify-869ec77a.js";import"./vue-demi-71ba0ef2.js";import"./ai-form-97a12f88.js";import"./vue-router-c9c3da21.js";import"./vue-i18n-86a71ef1.js";import"./vue-27cbb85a.js";import"./js-cookie-edb2da2a.js";import"./@element-plus-8ef115d9.js";import"./nprogress-b96aa312.js";import"./axios-21b846bc.js";import"./lodash-es-f559e892.js";import"./mitt-f7ef348c.js";import"./vue-grid-layout-9f938aef.js";import"./@vueuse-245b213e.js";import"./@popperjs-c75af06c.js";import"./@ctrl-f8748455.js";import"./dayjs-97457aaf.js";import"./async-validator-dee29e8b.js";import"./memoize-one-297ddbcb.js";import"./escape-html-e77024c3.js";import"./normalize-wheel-es-ed76fb12.js";import"./@floating-ui-c2863df3.js";const fe=r=>(ge("data-v-c359be82"),r=r(),ue(),r),be={class:"table-container"},_e={class:"table-footer mt15"},ye={class:"table-footer-tool"},ke={class:"tool-box"},Ce=["data-key"],we=fe(()=>_("i",{class:"fa fa-arrows-alt handle cursor-pointer"},null,-1)),xe=$({name:"netxTable"}),Se=$({...xe,props:{data:{type:Array,default:()=>[]},header:{type:Array,default:()=>[]},config:{type:Object,default:()=>{}},printName:{type:String,default:()=>""}},emits:["delRow","pageChange","sortHeader"],setup(r,{expose:N,emit:g}){const n=r,z=re(),I=ae(),{themeConfig:L}=oe(I),a=ie({page:{pageNum:1,pageSize:10},selectlist:[],checkListAll:!0,checkListIndeterminate:!1}),E=x(()=>!!n.config.isBorder),y=x(()=>n.config),A=x(()=>n.header.filter(t=>t.isCheck)),R=t=>{t?n.header.forEach(o=>o.isCheck=!0):n.header.forEach(o=>o.isCheck=!1),a.checkListIndeterminate=!1},U=()=>{const t=n.header.filter(o=>o.isCheck).length;a.checkListAll=t===n.header.length,a.checkListIndeterminate=t>0&&t<n.header.length},j=t=>{a.selectlist=t},B=t=>{g("delRow",t)},D=t=>{a.page.pageSize=t,g("pageChange",a.page)},H=t=>{a.page.pageNum=t,g("pageChange",a.page)},P=()=>{a.page.pageNum=1,a.page.pageSize=10,g("pageChange",a.page)},q=()=>{let t="",o="",i={};n.header.forEach(d=>{t+=`<th class="table-th">${d.title}</th>`}),n.data.forEach((d,h)=>{i[h]||(i[h]=[]),n.header.forEach(m=>{m.type==="text"?i[h].push(`<td class="table-th table-center">${d[m.key]}</td>`):m.type==="image"&&i[h].push(`<td class="table-th table-center"><img src="${d[m.key]}" style="width:${m.width}px;height:${m.height}px;"/></td>`)}),o+=`<tr>${i[h].join("")}</tr>`}),Z({printable:`<div style=display:flex;flex-direction:column;text-align:center><h3>${n.printName}</h3></div><table border=1 cellspacing=0><tr>${t}${o}</table>`,type:"raw-html",css:["//at.alicdn.com/t/c/font_2298093_rnp72ifj3ba.css","//unpkg.com/element-plus/dist/index.css"],style:"@media print{.mb15{margin-bottom:15px;}.el-button--small i.iconfont{font-size: 12px !important;margin-right: 5px;}}; .table-th{word-break: break-all;white-space: pre-wrap;}.table-center{text-align: center;}"})},F=()=>{if(a.selectlist.length<=0)return ne.warning("请先选择要导出的数据");ee(n.header,a.selectlist,`${L.value.globalTitle} ${new Date().toLocaleString()}`)},M=()=>{g("pageChange",a.page)},O=()=>{he(()=>{const t=te.create(z.value,{handle:".handle",dataIdAttr:"data-key",animation:150,onEnd:()=>{const o=[];t.toArray().forEach(i=>{n.header.forEach(d=>{d.key===i&&o.push({...d})})}),g("sortHeader",o)}})})};return N({pageReset:P}),(t,o)=>{const i=s("el-table-column"),d=s("el-image"),h=s("el-button"),m=s("el-popconfirm"),G=s("el-empty"),J=s("el-table"),W=s("el-pagination"),f=s("SvgIcon"),K=s("el-tooltip"),k=s("el-checkbox"),Q=s("el-scrollbar"),X=s("el-popover"),Y=se("loading");return c(),b("div",be,[ce((c(),u(J,me({data:r.data,border:E.value},t.$attrs,{"row-key":"id",stripe:"",style:{width:"100%"},onSelectionChange:j}),{empty:p(()=>[l(G,{description:"暂无数据"})]),default:p(()=>[r.config.isSelection?(c(),u(i,{key:0,type:"selection","reserve-selection":!0,width:"30"})):S("",!0),r.config.isSerialNo?(c(),u(i,{key:1,type:"index",label:"序号",width:"60"})):S("",!0),(c(!0),b(v,null,T(A.value,(e,C)=>(c(),u(i,{key:C,"show-overflow-tooltip":"",prop:e.key,width:e.colWidth,label:e.title},{default:p(w=>[e.type==="image"?(c(),u(d,{key:0,style:pe({width:`${e.width}px`,height:`${e.height}px`}),src:w.row[e.key],"zoom-rate":1.2,"preview-src-list":[w.row[e.key]],"preview-teleported":"",fit:"cover"},null,8,["style","src","preview-src-list"])):(c(),b(v,{key:1},[V(de(w.row[e.key]),1)],64))]),_:2},1032,["prop","width","label"]))),128)),r.config.isOperate?(c(),u(i,{key:2,label:"操作",width:"100"},{default:p(e=>[l(m,{title:"确定删除吗？",onConfirm:C=>B(e.row)},{reference:p(()=>[l(h,{text:"",type:"primary"},{default:p(()=>[V("删除")]),_:1})]),_:2},1032,["onConfirm"])]),_:1})):S("",!0)]),_:1},16,["data","border"])),[[Y,r.config.loading]]),_("div",_e,[l(W,{"current-page":a.page.pageNum,"onUpdate:currentPage":o[0]||(o[0]=e=>a.page.pageNum=e),"page-size":a.page.pageSize,"onUpdate:pageSize":o[1]||(o[1]=e=>a.page.pageSize=e),"pager-count":5,"page-sizes":[10,20,30],total:r.config.total,layout:"total, sizes, prev, pager, next, jumper",background:"",onSizeChange:D,onCurrentChange:H},null,8,["current-page","page-size","total"]),_("div",ye,[l(f,{name:"iconfont icon-dayin",size:19,title:"打印",onClick:q}),l(f,{name:"iconfont icon-yunxiazai_o",size:22,title:"导出",onClick:F}),l(f,{name:"iconfont icon-shuaxin",size:22,title:"刷新",onClick:M}),l(X,{placement:"top-end",trigger:"click",transition:"el-zoom-in-top","popper-class":"table-tool-popper",width:300,persistent:!1,onShow:O},{reference:p(()=>[l(f,{name:"iconfont icon-quanjushezhi_o",size:22,title:"设置"})]),default:p(()=>[_("div",ke,[l(K,{content:"拖动进行排序",placement:"top-start"},{default:p(()=>[l(f,{name:"fa fa-question-circle-o",size:17,class:"ml11",color:"#909399"})]),_:1}),l(k,{modelValue:a.checkListAll,"onUpdate:modelValue":o[2]||(o[2]=e=>a.checkListAll=e),indeterminate:a.checkListIndeterminate,class:"ml10 mr1",label:"列显示",onChange:R},null,8,["modelValue","indeterminate"]),l(k,{modelValue:y.value.isSerialNo,"onUpdate:modelValue":o[3]||(o[3]=e=>y.value.isSerialNo=e),class:"ml12 mr1",label:"序号"},null,8,["modelValue"]),l(k,{modelValue:y.value.isSelection,"onUpdate:modelValue":o[4]||(o[4]=e=>y.value.isSelection=e),class:"ml12 mr1",label:"多选"},null,8,["modelValue"])]),l(Q,null,{default:p(()=>[_("div",{ref_key:"toolSetRef",ref:z,class:"tool-sortable"},[(c(!0),b(v,null,T(r.header,e=>(c(),b("div",{class:"tool-sortable-item",key:e.key,"data-key":e.key},[we,l(k,{modelValue:e.isCheck,"onUpdate:modelValue":C=>e.isCheck=C,size:"default",class:"ml12 mr8",label:e.title,onChange:U},null,8,["modelValue","onUpdate:modelValue","label"])],8,Ce))),128))],512)]),_:1})]),_:1})])])])}}});const et=le(Se,[["__scopeId","data-v-c359be82"]]);export{et as default};

import{D as p}from"./DictType-bb03d246.js";import{e as U}from"./index-1c0db287.js";import{k as g,h as S,e as T,l as z,ah as B,m as n,o as N,c as R,p as o,y as l,a as q,G as _,u as r}from"./@vue-8306d5ee.js";import"./pinia-e84f6aa2.js";import"./vue-demi-71ba0ef2.js";import"./ai-form-3baf0d65.js";import"./element-plus-e21f9b5a.js";import"./lodash-es-f559e892.js";import"./@vueuse-245b213e.js";import"./@element-plus-8ef115d9.js";import"./@popperjs-c75af06c.js";import"./@ctrl-f8748455.js";import"./dayjs-97457aaf.js";import"./@intlify-869ec77a.js";import"./async-validator-dee29e8b.js";import"./memoize-one-297ddbcb.js";import"./escape-html-e77024c3.js";import"./normalize-wheel-es-ed76fb12.js";import"./@floating-ui-c2863df3.js";import"./vue-router-c9c3da21.js";import"./vue-i18n-86a71ef1.js";import"./vue-27cbb85a.js";import"./js-cookie-edb2da2a.js";import"./nprogress-b96aa312.js";import"./axios-21b846bc.js";import"./mitt-f7ef348c.js";import"./vue-grid-layout-9f938aef.js";const M={class:"dialog-footer"},A=g({name:"admin/dictType/form"}),ue=g({...A,props:{title:{type:String,default:""}},setup(V,{expose:w}){const{proxy:x}=S(),f=T(),t=z({showDialog:!1,sureLoading:!1,form:{}}),{form:a}=B(t),b=async(m={})=>{if(m.id>0){const e=await new p().get({id:m.id},{loading:!0}).catch(()=>{x.$modal.closeLoading()});e!=null&&e.success&&(t.form=e.data)}else t.form={enabled:!0};t.showDialog=!0},y=()=>{t.showDialog=!1},h=()=>{f.value.validate(async m=>{if(!m)return;t.sureLoading=!0;let e={};t.form.id!=null&&t.form.id>0?e=await new p().update(t.form,{showSuccessMessage:!0}).catch(()=>{t.sureLoading=!1}):e=await new p().add(t.form,{showSuccessMessage:!0}).catch(()=>{t.sureLoading=!1}),t.sureLoading=!1,e!=null&&e.success&&(U.emit("refreshDictType"),t.showDialog=!1)})};return w({open:b}),(m,e)=>{const u=n("el-input"),i=n("el-form-item"),d=n("el-col"),D=n("el-input-number"),k=n("el-switch"),C=n("el-row"),L=n("el-form"),c=n("el-button"),v=n("el-dialog");return N(),R("div",null,[o(v,{modelValue:t.showDialog,"onUpdate:modelValue":e[5]||(e[5]=s=>t.showDialog=s),"destroy-on-close":"",title:V.title,draggable:"","close-on-click-modal":!1,"close-on-press-escape":!1,width:"769px"},{footer:l(()=>[q("span",M,[o(c,{onClick:y,size:"default"},{default:l(()=>[_("取 消")]),_:1}),o(c,{type:"primary",onClick:h,size:"default",loading:t.sureLoading},{default:l(()=>[_("确 定")]),_:1},8,["loading"])])]),default:l(()=>[o(L,{ref_key:"formRef",ref:f,model:r(a),size:"default","label-width":"80px"},{default:l(()=>[o(C,{gutter:35},{default:l(()=>[o(d,{xs:24,sm:24,md:24,lg:24,xl:24},{default:l(()=>[o(i,{label:"名称",prop:"name",rules:[{required:!0,message:"请输入名称",trigger:["blur","change"]}]},{default:l(()=>[o(u,{modelValue:r(a).name,"onUpdate:modelValue":e[0]||(e[0]=s=>r(a).name=s),autocomplete:"off"},null,8,["modelValue"])]),_:1})]),_:1}),o(d,{xs:24,sm:24,md:24,lg:24,xl:24},{default:l(()=>[o(i,{label:"编码",prop:"code",rules:[{required:!0,message:"请输入编码",trigger:["blur","change"]}]},{default:l(()=>[o(u,{modelValue:r(a).code,"onUpdate:modelValue":e[1]||(e[1]=s=>r(a).code=s),autocomplete:"off"},null,8,["modelValue"])]),_:1})]),_:1}),o(d,{xs:24,sm:12,md:12,lg:12,xl:12},{default:l(()=>[o(i,{label:"排序"},{default:l(()=>[o(D,{modelValue:r(a).sort,"onUpdate:modelValue":e[2]||(e[2]=s=>r(a).sort=s)},null,8,["modelValue"])]),_:1})]),_:1}),o(d,{xs:24,sm:12,md:12,lg:12,xl:12},{default:l(()=>[o(i,{label:"启用"},{default:l(()=>[o(k,{modelValue:r(a).enabled,"onUpdate:modelValue":e[3]||(e[3]=s=>r(a).enabled=s)},null,8,["modelValue"])]),_:1})]),_:1}),o(d,{xs:24,sm:24,md:24,lg:24,xl:24},{default:l(()=>[o(i,{label:"说明"},{default:l(()=>[o(u,{modelValue:r(a).description,"onUpdate:modelValue":e[4]||(e[4]=s=>r(a).description=s),clearable:"",type:"textarea"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue","title"])])}}});export{ue as default};

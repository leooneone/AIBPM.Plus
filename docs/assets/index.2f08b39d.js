var C=Object.defineProperty;var D=(a,t,e)=>t in a?C(a,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):a[t]=e;var r=(a,t,e)=>(D(a,typeof t!="symbol"?t+"":t,e),e);import{H as L}from"./http-client.3dda918f.js";import{d as m,O as k,o as B,S as i,a4 as p,e as d,f as E,z as o,m as l,p as _,l as h,x as S,L as T}from"./vue.72f2672d.js";import"./index.57385bce.js";import"./index.0c380c40.js";import"./index.41e0794f.js";import"./storage.6b2e7cd0.js";class u extends L{constructor(){super(...arguments);r(this,"getList",(e={})=>this.request({path:"/api/admin/cache/get-list",method:"GET",secure:!0,format:"json",...e}));r(this,"clear",(e,s={})=>this.request({path:"/api/admin/cache/clear",method:"DELETE",query:e,secure:!0,...s}))}}const $={style:{padding:"8px"}},q=S("清除"),z=m({name:"admin/cache"}),O=m({...z,props:{title:{type:String,default:""}},setup(a){const{proxy:t}=T(),e=k({loading:!1,cacheListData:[]});B(()=>{s()});const s=async()=>{e.loading=!0;const n=await new u().getList();e.cacheListData=(n==null?void 0:n.data)??[],e.loading=!1},g=n=>{t.$modal.confirmDelete(`确定要清除【${n.description}】缓存?`,{icon:"ele-Brush"}).then(async()=>{await new u().clear({cacheKey:n.value},{loading:!0,showSuccessMessage:!0}),s()}).catch(()=>{})};return(n,H)=>{const c=i("el-table-column"),f=i("el-button"),v=i("el-table"),b=i("el-card"),w=p("auth"),x=p("loading");return d(),E("div",$,[o(b,{shadow:"never"},{default:l(()=>[_((d(),h(v,{data:e.cacheListData,"row-key":"id",style:{width:"100%"}},{default:l(()=>[o(c,{type:"index",width:"80",label:"#"}),o(c,{prop:"description",label:"缓存名"}),o(c,{prop:"name",label:"键名"}),o(c,{prop:"value",label:"键值"}),o(c,{label:"操作",width:"180",fixed:"right","header-align":"center",align:"center"},{default:l(({row:y})=>[_((d(),h(f,{icon:"ele-Brush",size:"small",text:"",type:"danger",onClick:M=>g(y)},{default:l(()=>[q]),_:2},1032,["onClick"])),[[w,"api:admin:cache:clear"]])]),_:1})]),_:1},8,["data"])),[[x,e.loading]])]),_:1})])}}});export{O as default};

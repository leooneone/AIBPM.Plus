import{g as F}from"./http-client.193f2c5b.js";import{e as N}from"./mitt.7f99bbc0.js";import{d as f,r as V,O as z,c as p,S as s,e as R,f as U,z as o,m as t,g as i,u as _,x as c,ab as B,ac as I}from"./vue.72f2672d.js";import{_ as L}from"./_plugin-vue_export-helper.c27b6911.js";import"./index.57385bce.js";import"./index.0c380c40.js";import"./index.41e0794f.js";import"./storage.6b2e7cd0.js";const A=l=>(B("data-v-833bc7cc"),l=l(),I(),l),T=A(()=>i("div",{class:"el-upload__text"},[c("拖拽上传或"),i("em",null,"点击上传")],-1)),E={class:"dialog-footer"},H=c("清空已上传"),O=c("取 消"),j=c("确 定"),q=f({name:"admin/file/upload"}),G=f({...q,props:{title:{type:String,default:""}},setup(l,{expose:m}){const n=V(),e=z({showDialog:!1,sureLoading:!1,fileDirectory:"bpm",fileReName:!0,fileList:[]}),g=p(()=>"https://demo.aibpm.ailicloud.com/api/admin/file/upload-file"),h=p(()=>({Authorization:"Bearer "+F()})),y=async(a={})=>{e.showDialog=!0},v=(a,d,r)=>{a!=null&&a.success&&N.emit("refreshFile",a.data)},b=async()=>{n.value.clearFiles(["success","fail"])},w=()=>{e.showDialog=!1},x=async()=>{n.value.submit(),e.showDialog=!1};return m({open:y}),(a,d)=>{const r=s("ele-UploadFilled"),D=s("el-icon"),C=s("el-upload"),u=s("el-button"),k=s("el-dialog");return R(),U("div",null,[o(k,{modelValue:e.showDialog,"onUpdate:modelValue":d[0]||(d[0]=S=>e.showDialog=S),title:l.title,draggable:"",width:"600px"},{footer:t(()=>[i("span",E,[o(u,{onClick:b,size:"default"},{default:t(()=>[H]),_:1}),o(u,{onClick:w,size:"default"},{default:t(()=>[O]),_:1}),o(u,{type:"primary",onClick:x,size:"default",loading:e.sureLoading},{default:t(()=>[j]),_:1},8,["loading"])])]),default:t(()=>[i("div",null,[o(C,{ref_key:"uploadRef",ref:n,action:_(g),headers:_(h),data:{fileDirectory:e.fileDirectory,fileReName:e.fileReName},drag:"",multiple:"","auto-upload":!1,"on-success":v},{default:t(()=>[o(D,{class:"el-icon--upload"},{default:t(()=>[o(r)]),_:1}),T]),_:1},8,["action","headers","data"])])]),_:1},8,["modelValue","title"])])}}});const Z=L(G,[["__scopeId","data-v-833bc7cc"]]);export{Z as default};

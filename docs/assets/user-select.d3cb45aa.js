import{_ as A}from"./preload-helper.101896b7.js";import{d as x,a6 as K,r as G,O as Q,S as n,a4 as j,e as _,l as f,m as l,g as d,z as o,u as b,G as q,E as F,p as H,t as J,x as h}from"./vue.72f2672d.js";import{U as W}from"./User.7b8f477f.js";import{h as X}from"./index.55c7ed79.js";import{_ as Y}from"./_plugin-vue_export-helper.c27b6911.js";import"./http-client.193f2c5b.js";import"./index.57385bce.js";import"./index.0c380c40.js";import"./index.41e0794f.js";import"./storage.6b2e7cd0.js";import"./index.eead254e.js";import"./_Uint8Array.e4cf923d.js";import"./_initCloneObject.7b8933bc.js";import"./index.1e09e151.js";import"./focus-trap.c8a23a9c.js";const Z={style:{padding:"0px 0px 8px 8px","background-color":"var(--ba-bg-color)"}},$={class:"my-flex-column h100"},ee=h(" 查询 "),te={class:"my-flex my-flex-end",style:{"margin-top":"20px"}},oe={class:"dialog-footer"},le=h("取 消"),ae=h("确 定"),ne=x({name:"admin/user/components/user-select"}),ie=x({...ne,props:{title:{type:String,default:""},multiple:{type:Boolean,default:!1},sureLoading:{type:Boolean,default:!1}},emits:["sure"],setup(r,{expose:C,emit:I}){const u=r,k=K(()=>A(()=>import("./org-menu.42d0a1ed.js"),["assets/org-menu.42d0a1ed.js","assets/org-menu.vue_vue_type_script_setup_true_lang.44f66112.js","assets/Org.a1ce8cb9.js","assets/http-client.193f2c5b.js","assets/index.57385bce.js","assets/index.0c380c40.js","assets/vue.72f2672d.js","assets/index.41e0794f.js","assets/storage.6b2e7cd0.js","assets/tree.d5b28a07.js","assets/index.79e12c01.js","assets/index.1e09e151.js","assets/index.eead254e.js","assets/_Uint8Array.e4cf923d.js"])),c=G(),e=Q({showDialog:!1,loading:!1,filterModel:{name:""},total:0,pageInput:{currentPage:1,pageSize:20,filter:{orgId:null}},userListData:[]}),D=()=>{e.showDialog=!0,e.pageInput.filter&&(e.pageInput.filter.orgId=null),s()},S=()=>{e.showDialog=!1},s=async()=>{var a,p;e.loading=!0;const t=await new W().getPage(e.pageInput);e.userListData=((a=t==null?void 0:t.data)==null?void 0:a.list)??[],e.total=((p=t.data)==null?void 0:p.total)??0,e.loading=!1},z=t=>{e.pageInput.pageSize=t,s()},V=t=>{e.pageInput.currentPage=t,s()},P=t=>{e.pageInput.filter&&(e.pageInput.filter.orgId=t==null?void 0:t.id),s()},R=t=>{c.value.toggleRowSelection(t,u.multiple?void 0:!0)},B=()=>{u.multiple||w()},L=()=>{e.showDialog=!1},w=()=>{const t=c.value.getSelectionRows();I("sure",u.multiple?t:t.length>0?t[0]:null)};return C({open:D,close:S}),(t,a)=>{const p=n("el-col"),M=n("el-input"),y=n("el-form-item"),m=n("el-button"),N=n("el-form"),v=n("el-card"),g=n("el-table-column"),U=n("el-pagination"),T=n("el-row"),E=n("el-dialog"),O=j("loading");return _(),f(E,{modelValue:e.showDialog,"onUpdate:modelValue":a[4]||(a[4]=i=>e.showDialog=i),"destroy-on-close":"",title:r.title,"append-to-body":"",draggable:"",width:"780px"},{footer:l(()=>[d("span",oe,[o(m,{onClick:L,size:"default"},{default:l(()=>[le]),_:1}),o(m,{type:"primary",onClick:w,size:"default",loading:r.sureLoading},{default:l(()=>[ae]),_:1},8,["loading"])])]),default:l(()=>[d("div",Z,[o(T,{gutter:8,style:{width:"100%"}},{default:l(()=>[o(p,{xs:24,sm:9},{default:l(()=>[d("div",$,[o(b(k),{onNodeClick:P,class:"my-flex-fill"})])]),_:1}),o(p,{xs:24,sm:15},{default:l(()=>[o(v,{shadow:"never","body-style":{paddingBottom:"0"},style:{"margin-top":"8px"}},{default:l(()=>[o(N,{model:e.filterModel,inline:!0,onSubmit:a[1]||(a[1]=q(()=>{},["stop","prevent"]))},{default:l(()=>[o(y,{label:"姓名",prop:"name"},{default:l(()=>[o(M,{modelValue:e.filterModel.name,"onUpdate:modelValue":a[0]||(a[0]=i=>e.filterModel.name=i),placeholder:"姓名",onKeyup:F(s,["enter"])},null,8,["modelValue","onKeyup"])]),_:1}),o(y,null,{default:l(()=>[o(m,{type:"primary",icon:"ele-Search",onClick:s},{default:l(()=>[ee]),_:1})]),_:1})]),_:1},8,["model"])]),_:1}),o(v,{shadow:"never",style:{"margin-top":"8px"}},{default:l(()=>[H((_(),f(b(X),{ref_key:"userTableRef",ref:c,data:e.userListData,style:{width:"100%"},"row-key":"id","default-expand-all":"","tree-props":{children:"children",hasChildren:"hasChildren"},"highlight-current-row":!r.multiple,onRowClick:R,onRowDblclick:B},{default:l(()=>[r.multiple?(_(),f(g,{key:0,type:"selection",width:"55"})):J("",!0),o(g,{prop:"name",label:"姓名","min-width":"80","show-overflow-tooltip":""}),o(g,{prop:"mobile",label:"手机号","min-width":"120","show-overflow-tooltip":""})]),_:1},8,["data","highlight-current-row"])),[[O,e.loading]]),d("div",te,[o(U,{currentPage:e.pageInput.currentPage,"onUpdate:currentPage":a[2]||(a[2]=i=>e.pageInput.currentPage=i),"page-size":e.pageInput.pageSize,"onUpdate:page-size":a[3]||(a[3]=i=>e.pageInput.pageSize=i),total:e.total,"page-sizes":[10,20,50,100],small:"",background:"",onSizeChange:z,onCurrentChange:V,layout:"total, sizes, prev, pager, next"},null,8,["currentPage","page-size","total"])])]),_:1})]),_:1})]),_:1})])]),_:1},8,["modelValue","title"])}}});const xe=Y(ie,[["__scopeId","data-v-f4dcbd5e"]]);export{xe as default};

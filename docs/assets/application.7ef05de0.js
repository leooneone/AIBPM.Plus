import{_ as R}from"./preload-helper.101896b7.js";import{W as $}from"./WorkflowTemplate.8c5ea799.js";import{g as j}from"./http-client.193f2c5b.js";import{d as B,a6 as M,r as W,c as v,O as J,o as q,S as r,a4 as b,p as k,e,f as i,l as d,m as p,F as I,B as w,z as g,u as C,x as S,L as G,g as t,y as u,n as y,j as f}from"./vue.72f2672d.js";import{_ as H}from"./_plugin-vue_export-helper.c27b6911.js";import"./http-client.180deef4.js";import"./index.57385bce.js";import"./index.0c380c40.js";import"./index.41e0794f.js";import"./storage.6b2e7cd0.js";const K=S("新建流程模板"),Q={class:"home-container",style:{margin:"10px 10px 10px 10px"}},U={style:{"border-left":"3px solid #409eff","padding-left":"5px","margin-bottom":"5px","font-size":"20px"}},X=["onClick"],Y={class:"flex-auto"},Z={class:"font22"},ee={class:"mt10"},te=B({name:"bpm/application"}),oe=B({...te,setup(se){const z=M(()=>R(()=>import("./myForm.b764704a.js"),["assets/myForm.b764704a.js","assets/preload-helper.101896b7.js","assets/data-contracts.9d84138f.js","assets/http-client.180deef4.js","assets/index.57385bce.js","assets/index.0c380c40.js","assets/vue.72f2672d.js","assets/index.41e0794f.js","assets/storage.6b2e7cd0.js","assets/_plugin-vue_export-helper.c27b6911.js","assets/myForm.8bf82b27.css"])),{proxy:P}=G(),{dic_bpm_group:O}=P.$dict("bpm-group"),x=W();v(()=>"https://demo.aibpm.ailicloud.com/api/admin/file/upload-file"),v(()=>({Authorization:"Bearer "+j()}));const o=J({loading:!0,pageInput:{currentPage:1,pageSize:20},templates:[]}),T=(s,m)=>{let n={};return s.forEach(function(l){let c=JSON.stringify(m(l));n[c]=n[c]||[],n[c].push(l)}),Object.keys(n).map(function(l){return n[l]})},A=async()=>{o.loading=!0;const s=await new $().listPublished();s.success&&(o.templates=T(s.data,function(m){return[m.groupId]})),o.loading=!1},D=s=>{x.value.open({type:2,templateId:s})};return q(()=>{A()}),(s,m)=>{const n=r("el-button"),l=r("el-empty"),c=r("el-tag"),E=r("SvgIcon"),F=r("el-col"),L=r("el-row"),N=b("auth"),V=b("loading");return k((e(),i("section",null,[!o.loading&&o.templates.length===0?(e(),d(l,{key:0,description:"没有流程模板可用"},{default:p(()=>[k((e(),d(n,{class:"ele-Plus",type:"primary"},{default:p(()=>[K]),_:1})),[[N,"api:bpm:template:control"]])]),_:1})):(e(!0),i(I,{key:1},w(o.templates,h=>(e(),i("section",Q,[t("div",U,u(C(O)[h[0].groupId]),1),g(L,{gutter:15,class:"home-card-one mb15"},{default:p(()=>[(e(!0),i(I,null,w(h,(a,_)=>(e(),d(F,{xs:24,sm:12,md:12,lg:6,xl:6,key:_,style:{"margin-top":"15px"},class:y({"home-media home-media-lg":_>1,"home-media-sm":_===1})},{default:p(()=>[t("div",{class:"home-card-item flex",onClick:ne=>D(a.id),style:{cursor:"pointer"}},[t("div",{class:y(["flex-margin flex w100",` home-one-animation${_}`])},[t("div",Y,[t("span",Z,u(a.name||"未命名流程"),1),t("span",{class:"ml5 font16",style:f({color:"var(--next-color-danger-lighter))"})},[g(c,null,{default:p(()=>[S("版本："+u(a.version),1)]),_:2},1024)],4),t("div",ee,u(a.remark),1)]),t("div",{class:"home-card-item-icon flex",style:f({background:"var(--next-color-success-lighter)"})},[a.icon.indexOf("ele")===0?(e(),d(E,{key:0,class:"flex-margin font32",name:a.icon,style:f({color:"var(--el-color-success)"})},null,8,["name","style"])):(e(),i("i",{key:1,class:y(["flex-margin font32",a.icon]),style:f({color:"var(--el-color-success)"})},null,6))],4)],2)],8,X)]),_:2},1032,["class"]))),128))]),_:2},1024)]))),256)),g(C(z),{ref_key:"formRef",ref:x},null,512)])),[[V,o.loading]])}}});const fe=H(oe,[["__scopeId","data-v-52a4ee45"]]);export{fe as default};

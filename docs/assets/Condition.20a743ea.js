import{d as $,O as B,w as L,S as s,e as n,f as g,z as p,l as r,m as u,t as j,F as v,B as x,p as z,v as H,x as y,y as J}from"./vue.df334614.js";import{_ as K}from"./_plugin-vue_export-helper.c27b6911.js";const Q={key:0},X=y("并且"),Z=y("或者"),ee=y("分组"),le=y("条件"),oe=$({name:"Condition",props:{fields:{type:Array,default(){return[]}},data:{type:Object,default(){return{isDefault:!0}}}},setup(W){const d=W,a={equal:{label:"等于",value:"Equal"},notEqual:{label:"不等于",value:"NotEqual"},contains:{label:"包含",value:"Contains"},notContains:{label:"不包含",value:"NotContains"},startsWith:{label:"开始以",value:"StartsWith"},notStartsWith:{label:"开始不是以",value:"NotStartsWith"},endsWith:{label:"结束以",value:"EndsWith"},notEndsWith:{label:"结束不是以",value:"NotEndsWith"},lessThan:{label:"小于",value:"LessThan"},lessThanOrEqual:{label:"小于等于",value:"LessThanOrEqual"},greaterThan:{label:"大于",value:"GreaterThan"},greaterThanOrEqual:{label:"大于等于",value:"GreaterThanOrEqual"},dateRange:{label:"时间段",value:"dateRange"},any:{label:"在列表",value:"Any"},notAny:{label:"不在列表",value:"NotAny"}},A={default:[a.equal],string:[a.equal,a.notEqual,a.contains,a.notContains,a.startsWith,a.notStartsWith,a.endsWith,a.notEndsWith],date:[a.equal,a.notEqual,a.lessThan,a.lessThanOrEqual,a.greaterThan,a.greaterThanOrEqual,a.dateRange],number:[a.equal,a.notEqual,a.lessThan,a.lessThanOrEqual,a.greaterThan,a.greaterThanOrEqual],bool:[a.equal]};let T={field:"",label:""};if(d.fields&&d.fields.length>0){const t=d.fields.find(l=>l.default===!0);t?T=t:T=d.fields[0]}const c=B({loading:!1,key:1,dataTree:{},defaultProps:{label:"",children:"filters"},operatorGroups:A,firstField:T,datePickerOptions:{disabledDate(t){return t.getTime()>Date.now()}}});L(()=>d.data,t=>{c.dataTree=t.root===void 0?{root:!0,logic:"And",filters:[]}:t},{deep:!0,immediate:!0});const h=t=>{const l=c.operatorGroups[t||""];return l&&l.length>0?l:c.operatorGroups.default},N=(t,l)=>{if(d.fields===void 0)return;const i=d.fields.find(m=>m.vModel===t);l.value="",l.label=i.label,l.tag=i.tag,l.type=i.dataType?i.dataType:"",l.options=i.options;const _=h(l.type);let f="";if(i.operator&&(f=_.findIndex(V=>V.value===i.operator)>=0?i.operator:""),f||(f=_[0].value),l.operator=f,l.config={...i.config},l.type==="date"){let m="date";l.operator==="dateRange"&&(m=m+"range"),l.config.type=l.config.type?l.config.type:m,l.config.type.indexOf("range")>=0&&(l.operator="dateRange"),l.config.format=l.config.format?l.config.format:"YYYY-MM-DD",l.config.valueFormat=l.config.valueFormat?l.config.valueFormat:"YYYY-MM-DD",l.config.defaultTime=l.config.defaultTime?l.config.defaultTime:["00:00:00","00:00:00"]}},Y=(t,l)=>{l.type==="date"&&(c.key++,t==="dateRange"?(l.value="",l.config.type=l.config.type+"range"):l.config.type.indexOf("range")>=0&&(l.value="",l.config.type=l.config.type.replace(/range$/,"")))},S=t=>{const l={logic:"And"};t.filters||(t.filters=[]),t.filters.push(l)},G=t=>{const l=h(t.type)[0],i={field:c.firstField.field,label:c.firstField.label,operator:l.value,config:{...c.firstField.config},value:c.firstField.value};t.filters||(t.filters=[]);const _=t.filters.findIndex(f=>f.logic&&!f.field);_>=0?t.filters.splice(_,0,i):t.filters.push(i)},q=(t,l)=>{const i=t.parent,_=i.data.filters||i.data,f=_.findIndex(m=>m===l);_.splice(f,1)};return(t,l)=>{const i=s("el-switch"),_=s("el-empty"),f=s("el-radio"),m=s("el-radio-group"),V=s("el-button"),E=s("ele-Delete"),D=s("el-icon"),C=s("el-option"),U=s("el-select"),b=s("el-col"),I=s("ai-ou-select"),F=s("el-input-number"),w=s("el-date-picker"),M=s("el-input"),R=s("el-row"),P=s("el-tree");return n(),g("section",null,[p(i,{modelValue:d.data.isDefault,"onUpdate:modelValue":l[0]||(l[0]=k=>d.data.isDefault=k),"active-text":"默认/其他条件","inactive-text":"指定条件"},null,8,["modelValue"]),d.data.isDefault?(n(),r(_,{key:0,description:"无需配置条件"})):(n(),r(P,{key:1,data:[c.dataTree],props:c.defaultProps,"expand-on-click-node":!1,"default-expand-all":!0,indent:16,class:"my-search-filter"},{default:u(({node:k,data:e})=>[e.logic&&!e.field?(n(),g("span",Q,[p(m,{modelValue:e.logic,"onUpdate:modelValue":o=>e.logic=o},{default:u(()=>[p(f,{label:"And"},{default:u(()=>[X]),_:1}),p(f,{label:"Or"},{default:u(()=>[Z]),_:1})]),_:2},1032,["modelValue","onUpdate:modelValue"]),p(V,{type:"text",icon:"el-icon-plus",onClick:o=>S(e)},{default:u(()=>[ee]),_:2},1032,["onClick"]),p(V,{type:"text",icon:"el-icon-plus",onClick:o=>G(e)},{default:u(()=>[le]),_:2},1032,["onClick"]),e.root?j("",!0):(n(),r(D,{key:0,onClick:o=>q(k,e),style:{"margin-left":"8px"}},{default:u(()=>[p(E)]),_:2},1032,["onClick"]))])):(n(),r(R,{key:1,gutter:5},{default:u(()=>[p(b,{span:8},{default:u(()=>[p(U,{modelValue:e.field,"onUpdate:modelValue":o=>e.field=o,loading:c.loading,filterable:"",onChange:o=>N(o,e)},{default:u(()=>[(n(!0),g(v,null,x(d.fields.filter(o=>o.proCondition),(o,O)=>(n(),r(C,{key:O,label:o.label,value:o.vModel},null,8,["label","value"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue","loading","onChange"])]),_:2},1024),z(p(b,{span:4},{default:u(()=>[p(U,{modelValue:e.operator,"onUpdate:modelValue":o=>e.operator=o,onChange:o=>Y(o,e)},{default:u(()=>[(n(!0),g(v,null,x(h(e.type),(o,O)=>(n(),r(C,{key:O,label:o.label,value:o.value},null,8,["label","value"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue","onChange"])]),_:2},1536),[[H,h(e.type).length>1]]),p(b,{span:11},{default:u(()=>[e.tag==="ai-ou-select"?(n(),r(I,{key:0,modelValue:e.value,"onUpdate:modelValue":o=>e.value=o,tabList:["user"]},null,8,["modelValue","onUpdate:modelValue"])):e.tag==="fc-amount"||e.tag==="el-input-number"?(n(),r(F,{key:1,style:{"margin-left":"5px"},modelValue:e.value,"onUpdate:modelValue":o=>e.value=o},null,8,["modelValue","onUpdate:modelValue"])):e.tag==="el-select"?(n(),r(U,{key:2,modelValue:e.value,"onUpdate:modelValue":o=>e.value=o,placeholder:"请选择"},{default:u(()=>[(n(!0),g(v,null,x(e.options,o=>(n(),r(C,{key:o.value,label:o.label,value:o.value},null,8,["label","value"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue"])):e.tag==="el-radio-group"?(n(),r(m,{key:3,modelValue:e.value,"onUpdate:modelValue":o=>e.value=o,class:"radio-group"},{default:u(()=>[(n(!0),g(v,null,x(e.options,o=>(n(),r(f,{label:o.label,key:o.label},{default:u(()=>[y(J(o.label),1)]),_:2},1032,["label"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue"])):e.type==="date"?(n(),g(v,{key:4},[e.config.type.indexOf("range")>=0?(n(),r(w,{key:0,modelValue:e.value,"onUpdate:modelValue":o=>e.value=o,type:e.config.type,"unlink-panels":"","start-placeholder":"开始时间","end-placeholder":"结束时间","default-time":e.config.defaultTime,format:e.config.format,"value-format":e.config.valueFormat,"picker-options":c.datePickerOptions,style:{"margin-left":"5px"}},null,8,["modelValue","onUpdate:modelValue","type","default-time","format","value-format","picker-options"])):(n(),r(w,{key:1,modelValue:e.value,"onUpdate:modelValue":o=>e.value=o,type:e.config.type,format:e.config.format,"value-format":e.config.valueFormat,"picker-options":c.datePickerOptions,style:{"margin-left":"5px"}},null,8,["modelValue","onUpdate:modelValue","type","format","value-format","picker-options"]))],64)):e.type==="number"?(n(),r(F,{key:5,modelValue:e.value,"onUpdate:modelValue":o=>e.value=o,"controls-position":"right",style:{width:"120px","margin-left":"5px"}},null,8,["modelValue","onUpdate:modelValue"])):e.type==="bool"?(n(),r(i,{key:6,modelValue:e.value,"onUpdate:modelValue":o=>e.value=o},null,8,["modelValue","onUpdate:modelValue"])):(n(),r(M,{key:7,modelValue:e.value,"onUpdate:modelValue":o=>e.value=o},null,8,["modelValue","onUpdate:modelValue"]))]),_:2},1024),p(b,{span:1},{default:u(()=>[p(D,{onClick:o=>q(k,e),style:{"margin-left":"5px"}},{default:u(()=>[p(E)]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024))]),_:1},8,["data","props"]))])}}});const ae=K(oe,[["__scopeId","data-v-36655a5b"]]);export{ae as default};

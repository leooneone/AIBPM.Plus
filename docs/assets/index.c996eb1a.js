import F from"./Permission.90a9a010.js";import S from"./Operation.06714c7c.js";import O from"./Participant.fd6627bd.js";import z from"./Condition.acab08a3.js";import A from"./Circulate.f172b24a.js";import{C as j}from"./index.e64efb6f.js";import{S as t,e as c,l as p,C as J,m as o,x as d,y as C,p as y,v as N,g as b,z as i,t as r}from"./vue.df334614.js";import{_ as U}from"./_plugin-vue_export-helper.c27b6911.js";import"./index.e0ad165c.js";import"./user-select.0622e36c.js";import"./User.4679a863.js";import"./http-client.ff22776c.js";import"./index.de963593.js";import"./index.390778f0.js";import"./index.4621962e.js";import"./storage.08e609be.js";import"./js.cookie.cf83ad76.js";import"./org-menu.vue_vue_type_script_setup_true_lang.2abc46e4.js";import"./Org.95a10495.js";import"./tree.d5b28a07.js";import"./index.6c5a2d2c.js";import"./index.7cba2d6b.js";import"./index.f4a20413.js";import"./_Uint8Array.2a02cf9e.js";import"./org-select.vue_vue_type_script_setup_true_lang.c26e97f7.js";import"./role-select.vue_vue_type_script_setup_true_lang.d0b8f7bd.js";import"./Role.14cde0b3.js";import"./_initCloneObject.115dee92.js";import"./focus-trap.ccecd842.js";const M={inject:["titleChange"],directives:{ClickOutside:j},components:{Permission:F,Participant:O,Condition:z,Circulate:A,Operation:S},props:{fields:{type:Array,default:()=>{}},node:{type:Object,default:()=>{}}},data(){return{titleInputVisible:!1,curNode:{},isDrawer:!1,workflowTypes:[{label:"开始",value:"start"},{label:"结束",value:"end"},{label:"条件",value:"condition"},{label:"传阅",value:"circulate"},{label:"审批",value:"approver"}]}},watch:{isDrawer(s){s?this.$nextTick(()=>{this.curNode=JSON.parse(JSON.stringify(this.node))}):(console.log("---------------curnode={}---------"),this.curNode={})}},methods:{showTitleInput(){this.titleInputVisible=!0,this.$nextTick(()=>this.$refs.titleInput.focus())},onTitleChange(){this.titleChange(this.curNode.title),this.titleInputVisible=!1},onConfirm(){var s,l,n,m;this.node.approve=(s=this.$refs.approvePanel)==null?void 0:s.onConfirm(),this.node.permission=(l=this.$refs.permissionPanel)==null?void 0:l.onConfirm(),this.node.condition=(n=this.$refs.conditionPanel)==null?void 0:n.onConfirm(),this.node.circulate=(m=this.$refs.circulatePanel)==null?void 0:m.onConfirm(),console.log("  panel confirmed"),this.close()},close(){this.isDrawer=!1},open(){this.isDrawer=!0,this.$nextTick(()=>{})}}},q={style:{flex:"auto"}},G=d("取消"),H=d("确定");function K(s,l,n,m,e,a){const v=t("ele-Edit"),k=t("el-icon"),w=t("el-input"),V=t("condition"),u=t("el-tab-pane"),g=t("participant"),x=t("permission"),B=t("circulate"),I=t("operation");t("el-option"),t("el-select");const P=t("el-tabs"),h=t("el-button"),D=t("el-drawer");return n.node?(c(),p(D,{key:0,title:"$t('message.layout.configTitle')",modelValue:e.isDrawer,"onUpdate:modelValue":l[3]||(l[3]=f=>e.isDrawer=f),direction:"rtl",isModal:"false","destroy-on-close":"",size:"600px"},J({footer:o(()=>[b("div",q,[i(h,{onClick:a.close},{default:o(()=>[G]),_:1},8,["onClick"]),i(h,{type:"primary",onClick:a.onConfirm},{default:o(()=>[H]),_:1},8,["onClick"])])]),default:o(()=>[i(P,{type:"border-card",style:{height:"calc(100vh - 160px)"}},{default:o(()=>[e.curNode.type==="condition"?(c(),p(u,{key:0,label:"条件"},{default:o(()=>[i(V,{ref:"conditionPanel",fields:n.fields,data:e.curNode.condition},null,8,["fields","data"])]),_:1})):r("",!0),["approve","deal"].includes(e.curNode.type)?(c(),p(u,{key:1,label:"参与人设置"},{default:o(()=>[i(g,{ref:"approvePanel",fields:n.fields,data:e.curNode.approve},null,8,["fields","data"])]),_:1})):r("",!0),["approve","start","deal"].includes(e.curNode.type)?(c(),p(u,{key:2,label:"表单权限"},{default:o(()=>[i(x,{ref:"permissionPanel",fields:n.fields,data:e.curNode.permission},null,8,["fields","data"])]),_:1})):r("",!0),e.curNode.type==="circulate"?(c(),p(u,{key:3,label:"传阅"},{default:o(()=>[i(B,{ref:"circulatePanel",fields:n.fields,data:e.curNode.circulate},null,8,["fields","data"])]),_:1})):r("",!0),i(u,{label:"操作权限"},{default:o(()=>[i(I,{ref:"operationPanel",data:e.curNode.operation},null,8,["data"])]),_:1}),r("",!0)]),_:1})]),_:2},[e.curNode&&e.curNode.type=="start"?{name:"header",fn:o(({close:f,titleId:T,titleClass:E})=>[d(C(e.curNode.title),1)])}:{name:"header",fn:o(({close:f,titleId:T,titleClass:E})=>[y(b("span",{onClick:l[0]||(l[0]=(..._)=>a.showTitleInput&&a.showTitleInput(..._)),style:{cursor:"pointer"}},[d(C(e.curNode.title)+" ",1),i(k,{style:{"font-size":"1.5em"}},{default:o(()=>[i(v)]),_:1})],512),[[N,!e.titleInputVisible]]),y(i(w,{ref:"titleInput",size:"mini",modelValue:e.curNode.title,"onUpdate:modelValue":l[1]||(l[1]=_=>e.curNode.title=_),placeholder:"请输入节点标签",onBlur:a.onTitleChange},null,8,["modelValue","onBlur"]),[[N,e.titleInputVisible]])])}]),1032,["title","modelValue"])):r("",!0)}const ve=U(M,[["render",K]]);export{ve as default};

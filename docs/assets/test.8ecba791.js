import{d as m,r as n,S as f,e as a,f as d,l as i,m as l,t as v,x as u}from"./vue.72f2672d.js";import{_ as y}from"./_plugin-vue_export-helper.c27b6911.js";const k=m({name:"Recorder",setup(){const o=n(!1),r=n("");let t=null;const s=async()=>{try{const e=await navigator.mediaDevices.getUserMedia({audio:!0});t=new MediaRecorder(e),t.addEventListener("dataavailable",c),t.start(10),o.value=!0}catch(e){console.error(e),alert("无法获取麦克风权限，请检查设置")}},c=e=>{if(e.data&&e.data.size>0){const p=new Blob([e.data],{type:"audio/mp3"});r.value=URL.createObjectURL(p)}};return{recording:o,audioUrl:r,startRecord:s,stopRecord:()=>{t&&(t.stop(),o.value=!1)}}}});const C={class:"recorder"},R=u(" 开始录音 "),h=u(" 停止录音 "),b=["src"];function g(o,r,t,s,c,_){const e=f("el-button");return a(),d("div",C,[o.recording?(a(),i(e,{key:1,type:"danger",icon:"el-icon-close",onClick:o.stopRecord},{default:l(()=>[h]),_:1},8,["onClick"])):(a(),i(e,{key:0,type:"primary",icon:"el-icon-microphone",onClick:o.startRecord},{default:l(()=>[R]),_:1},8,["onClick"])),o.audioUrl?(a(),d("audio",{key:2,src:o.audioUrl,controls:""},null,8,b)):v("",!0)])}const F=y(k,[["render",g],["__scopeId","data-v-92d708d8"]]);export{F as default};
